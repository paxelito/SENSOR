<!DOCTYPE html>
<!--[if IE 8]>
<html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>lib.classes.agents &mdash; SENSOR 20141022 documentation</title>


    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css"/>


    <link rel="top" title="SENSOR 20141022 documentation" href="../../../index.html"/>
    <link rel="up" title="Module code" href="../../index.html"/>


    <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

<div class="wy-grid-for-nav">


    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
        <div class="wy-side-scroll">
            <div class="wy-side-nav-search">


                <a href="../../../index.html" class="icon icon-home"> SENSOR


                </a>


                <div class="version">
                    1.3
                </div>


                <div role="search">
                    <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
                        <input type="text" name="q" placeholder="Search docs"/>
                        <input type="hidden" name="check_keywords" value="yes"/>
                        <input type="hidden" name="area" value="default"/>
                    </form>
                </div>


            </div>

            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">


                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../../lib.html">lib package</a></li>
                    <li class="toctree-l1"><a class="reference internal" href="../../../main.html">main module</a></li>
                </ul>


            </div>
        </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">


        <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
            <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
            <a href="../../../index.html">SENSOR</a>
        </nav>


        <div class="wy-nav-content">
            <div class="rst-content">


                <div role="navigation" aria-label="breadcrumbs navigation">
                    <ul class="wy-breadcrumbs">
                        <li><a href="../../../index.html">Docs</a> &raquo;</li>

                        <li><a href="../../index.html">Module code</a> &raquo;</li>

                        <li>lib.classes.agents</li>
                        <li class="wy-breadcrumbs-aside">


                        </li>
                    </ul>
                    <hr/>
                </div>
                <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
                    <div itemprop="articleBody">

                        <h1>Source code for lib.classes.agents</h1>
                        <div class="highlight"><pre>
<span></span><span class="ch">#!/usr/bin/env python</span>
<span class="c1"># -*- coding: latin-1 -*-</span>

<span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">random</span> <span class="kn">as</span> <span class="nn">ran</span>
<span class="kn">import</span> <span class="nn">copy</span>

<div class="viewcode-block" id="agents"><a class="viewcode-back"
                                           href="../../../lib.classes.html#lib.classes.agents.agents">[docs]</a><span
        class="k">class</span> <span class="nc">agents</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span
            class="p">,</span> <span class="n">tmpDL</span> <span class="o">=</span> <span class="mi">0</span><span
            class="p">,</span> <span class="n">tmpID</span> <span class="o">=</span> <span class="mi">0</span><span
            class="p">,</span> <span class="n">tmpX</span> <span class="o">=</span> <span class="mi">0</span><span
            class="p">,</span> <span class="n">tmpY</span> <span class="o">=</span> <span class="mi">0</span><span
            class="p">,</span> <span class="n">tmpNrgDim</span> <span class="o">=</span> <span
            class="mi">100</span><span class="p">,</span> <span class="n">tmpha</span> <span class="o">=</span> <span
            class="mi">0</span><span class="p">,</span> \
    <span class="n">tmpSocialLobby</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">tmpSolPot</span> <span class="o">=</span> <span class="n">ran</span><span class="o">.</span><span
            class="n">uniform</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span
            class="mi">1</span><span class="p">),</span> <span class="n">tmpEquityCost</span> <span class="o">=</span>
    <span class="mf">0.05</span><span class="p">,</span> \
    <span class="n">tmpIntCap</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">,</span> <span
            class="n">tmpInvLength</span> <span class="o">=</span> <span class="mi">50</span><span class="p">,</span>
    <span class="n">tmpHealth</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span
            class="n">tmpYield</span> <span class="o">=</span> <span class="mi">55</span><span class="p">,</span> <span
            class="n">tmpAge</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> \
    <span class="n">tmpNrgTech</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">tmpNrgTechProp</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">tmpTechPolicy</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">tmpTechAges</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> \
    <span class="n">tmpBalance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span
            class="n">tmpMBalance</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">tmpDebts</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> <span
            class="n">tmpRemDebt</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">tmpDebtTime</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span> \
    <span class="n">tmpDebtLen</span> <span class="o">=</span> <span class="bp">None</span><span class="p">,</span>
    <span class="n">tmpMrep</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
    <span class="sd">			Constructor of the agent class</span>
    <span class="sd">		</span>
    <span class="sd">		&#39;&#39;&#39;</span>
    <span class="c1"># General Agent Attributes</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ID</span> <span class="o">=</span> <span
            class="n">tmpID</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span
            class="n">tmpX</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span
            class="n">tmpY</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">totEnergyNeed</span> <span class="o">=</span>
    <span class="n">tmpNrgDim</span> <span class="c1"># Energetic dimension of the agent</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span> <span class="o">=</span> <span
            class="n">tmpDL</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span
            class="n">tmpAge</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ha</span> <span class="o">=</span> <span
            class="n">tmpha</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">TxHA_yield</span> <span class="o">=</span> <span
            class="n">tmpYield</span> <span class="c1"># tons per ha per year - bio raw material yield</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">TxHA_yield_month</span> <span class="o">=</span>
    <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
            class="n">TxHA_yield</span><span class="p">)</span> <span class="o">/</span> <span class="mi">12</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">residualHa</span> <span class="o">=</span> <span
            class="n">tmpha</span> <span class="c1"># Remaining available HA for selling potential bioenergy</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">techawareness</span> <span class="o">=</span>
    <span class="bp">False</span> <span class="c1"># The agent at the beginning does not know anything about the technology of the system</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sludgeDimension</span> <span class="o">=</span>
    <span class="mi">10</span> <span class="c1"># Dimension of the agent in term of sludge</span>

    <span class="c1"># Technology Parameters</span>
    <span class="k">if</span> <span class="n">tmpNrgTech</span> <span class="o">==</span> <span
            class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nrgTechsReceipt</span> <span class="o">=</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span
            class="c1"># technologies vectors</span>
    <span class="k">if</span> <span class="n">tmpNrgTechProp</span> <span class="o">==</span> <span
            class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nrgPropReceipt</span> <span class="o">=</span>
    <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span
            class="n">totEnergyNeed</span><span class="p">]</span> <span class="c1"># KW provided by the different technologies. </span>
    <span class="k">if</span> <span class="n">tmpTechPolicy</span> <span class="o">==</span> <span
            class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">techPolicy</span> <span class="o">=</span> <span
            class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span
            class="p">]]</span> <span class="c1"># tmpPolicy tmpPolicyLength. </span>
    <span class="k">if</span> <span class="n">tmpTechAges</span> <span class="o">==</span> <span
            class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">nrgTechAges</span> <span class="o">=</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># technology ages. Time elapsed from the installation </span>
    <span class="bp">self</span><span class="o">.</span><span class="n">flagFree</span> <span class="o">=</span> <span
            class="bp">True</span>

    <span class="c1"># Physical Parameters of the agent</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">solar_potential</span> <span class="o">=</span>
    <span class="n">tmpSolPot</span> <span class="c1"># Proportion of solar irradiation according to the place where agent is (from 0 to 1) </span>
    <span class="bp">self</span><span class="o">.</span><span class="n">co2</span> <span class="o">=</span> <span
            class="mi">0</span>
    <span class="c1"># COMMITMENT</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">social_lobby</span> <span class="o">=</span>
    <span class="n">tmpSocialLobby</span> <span
            class="c1"># How much the agent can be influenced by the neighborhoods</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">riskPredisposition</span> <span
            class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span
            class="o">.</span><span class="n">social_lobby</span> <span class="c1"># We assume that the risk predisposition is a function of the imitation </span>

    <span class="c1"># BUSINESS PARAMETERS</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">suppliers</span> <span class="o">=</span> <span
            class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span
            class="p">[]</span>

    <span class="c1"># FINANCIAL PARAMETERS</span>
    <span class="c1"># the equity capital is randomly modified to create variability </span>
    <span class="bp">self</span><span class="o">.</span><span class="n">int_capital</span> <span class="o">=</span>
    <span class="n">ran</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span
            class="n">tmpIntCap</span> <span class="o">*</span> <span class="mf">0.9</span><span class="p">,</span>
    <span class="n">tmpIntCap</span> <span class="o">*</span> <span class="mf">1.1</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">int_capital</span>
    <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="bp">self</span><span
            class="o">.</span><span class="n">int_capital</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">int_capital</span>
    <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span> <span class="bp">self</span><span
            class="o">.</span><span class="n">int_capital</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">equityCost</span> <span class="o">=</span> <span
            class="n">tmpEquityCost</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span> <span
            class="n">tmpBalance</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">month_balance</span> <span class="o">=</span>
    <span class="n">tmpMBalance</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">invLength</span> <span class="o">=</span> <span
            class="n">tmpInvLength</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">health</span> <span class="o">=</span> <span
            class="n">tmpHealth</span> <span class="c1"># This parameter represents the health of the agent. Once that the agent has assessed the possible investment, this is the probability to actually invest</span>
    <span class="k">if</span> <span class="n">tmpDebts</span> <span class="o">==</span> <span
            class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debts</span> <span class="o">=</span> <span
            class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># initial debts list of the agent</span>
    <span class="k">if</span> <span class="n">tmpRemDebt</span> <span class="o">==</span> <span
            class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">RemainingDebts</span> <span class="o">=</span>
    <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># List of the remaining part of the debt for each technology</span>
    <span class="k">if</span> <span class="n">tmpDebtTime</span> <span class="o">==</span> <span
            class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debtTime</span> <span class="o">=</span> <span
            class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># Time elapsed from the beginning of the investment for each technology</span>
    <span class="k">if</span> <span class="n">tmpDebtLen</span> <span class="o">==</span> <span
            class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debtLength</span> <span class="o">=</span> <span
            class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># length of the different investments</span>
    <span class="k">if</span> <span class="n">tmpMrep</span> <span class="o">==</span> <span class="bp">None</span><span
            class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">debtMonthRepayment</span> <span
            class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span
            class="c1"># month payment for each investment</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">distanceList</span> <span class="o">=</span>
    <span class="p">[]</span> <span class="c1"># initialize distance list </span>
    <span class="bp">self</span><span class="o">.</span><span class="n">attraction</span> <span class="o">=</span> <span
            class="p">[]</span> <span class="c1"># define social attraction of the other technologies. </span>
    <span class="bp">self</span><span class="o">.</span><span class="n">bioHoursXMonth</span> <span class="o">=</span>
    <span class="mi">650</span> <span class="c1"># (7800 hours per year)</span>

    <div class="viewcode-block" id="agents.printAgent"><a class="viewcode-back"
                                                          href="../../../lib.classes.html#lib.classes.agents.agents.printAgent">[docs]</a>
        <span class="k">def</span> <span class="nf">printAgent</span><span class="p">(</span><span
                class="bp">self</span><span class="p">):</span>
        <span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span>
    </div>

    <div class="viewcode-block" id="agents.resetAgentToInit"><a class="viewcode-back"
                                                                href="../../../lib.classes.html#lib.classes.agents.agents.resetAgentToInit">[docs]</a>
        <span class="k">def</span> <span class="nf">resetAgentToInit</span><span class="p">(</span><span
                class="bp">self</span><span class="p">):</span>
        <span class="c1"># Technology Parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrgTechsReceipt</span> <span
                class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span
                class="c1"># technologies vectors</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrgPropReceipt</span> <span
                class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span
                class="n">totEnergyNeed</span><span class="p">]</span> <span class="c1"># KW provided by the different technologies. </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">techPolicy</span> <span class="o">=</span>
        <span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span
                class="p">]]</span> <span class="c1"># tmpPolicy tmpPolicyLength. </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrgTechAges</span> <span class="o">=</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># technology ages. Time elapsed from the installation </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flagFree</span> <span class="o">=</span>
        <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">techawareness</span> <span
                class="o">=</span> <span class="bp">False</span> <span class="c1"># The agent at the beginning does not know anything about the technology of the system</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span
                class="mi">0</span>

        <span class="c1"># Physical Parameters of the agent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">co2</span> <span class="o">=</span> <span
                class="mi">0</span>

        <span class="c1"># BUSINESS PARAMETERS</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">suppliers</span> <span class="o">=</span>
        <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span
                class="p">[]</span>

        <span class="c1"># FINANCIAL PARAMETERS</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span>
        <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">month_balance</span> <span
                class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debts</span> <span class="o">=</span> <span
                class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># initial debts list of the agent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RemainingDebts</span> <span
                class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span
                class="c1"># List of the remaining part of the debt for each technology</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debtTime</span> <span class="o">=</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># Time elapsed from the beginning of the investment for each technology</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debtLength</span> <span class="o">=</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># length of the different investments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debtMonthRepayment</span> <span
                class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span
                class="c1"># month payment for each investment</span></div>


    <div class="viewcode-block" id="agents.set_new_socialobby_and_committiment"><a class="viewcode-back"
                                                                                   href="../../../lib.classes.html#lib.classes.agents.agents.set_new_socialobby_and_committiment">[docs]</a>
        <span class="k">def</span> <span class="nf">set_new_socialobby_and_committiment</span><span
                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tmpSL</span><span
                class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">social_lobby</span> <span class="o">=</span>
        <span class="n">tmpSL</span> <span class="c1"># How much the agent can be influenced by the neighborhoods</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">riskPredisposition</span> <span
                class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">social_lobby</span> <span class="c1"># We assume that the risk predisposition is a function of the imitation 		</span>
    </div>

    <div class="viewcode-block" id="agents.newTech"><a class="viewcode-back"
                                                       href="../../../lib.classes.html#lib.classes.agents.agents.newTech">[docs]</a>
        <span class="k">def</span> <span class="nf">newTech</span><span class="p">(</span><span
                class="bp">self</span><span class="p">,</span> <span class="n">tmpTechID</span><span class="p">,</span>
        <span class="n">tmpProp</span><span class="p">,</span> <span class="n">tmpDistance</span><span
                class="p">,</span> <span class="n">tmpPolicy</span><span class="p">,</span> <span class="n">tmpPolicyLength</span><span
                class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
        <span class="sd">			Function to insert a new technology in the agent receipt</span>
        <span class="sd">			</span>
        <span class="sd">		&#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrgTechsReceipt</span><span
                class="o">.</span><span class="n">append</span><span class="p">(</span><span
                class="n">tmpTechID</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrgPropReceipt</span><span
                class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span
                class="o">.</span><span class="n">totEnergyNeed</span> <span class="o">*</span> <span
                class="n">tmpProp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">techPolicy</span><span
                class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">tmpPolicy</span><span
                class="p">,</span><span class="n">tmpPolicyLength</span><span class="p">])</span></div>

    <div class="viewcode-block" id="agents.awarenessAssessment"><a class="viewcode-back"
                                                                   href="../../../lib.classes.html#lib.classes.agents.agents.awarenessAssessment">[docs]</a>
        <span class="k">def</span> <span class="nf">awarenessAssessment</span><span class="p">(</span><span class="bp">self</span><span
                class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
        <span class="sd">			If the agent does not know the available technologies, it can get them</span>
        <span class="sd">		</span>
        <span class="sd">		&#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">techawareness</span> <span class="o">==</span> <span class="bp">False</span><span
                class="p">:</span>
        <span class="k">if</span> <span class="n">ran</span><span class="o">.</span><span class="n">random</span><span
                class="p">()</span> <span class="o">&lt;</span> <span class="p">(</span><span
                class="bp">self</span><span class="o">.</span><span class="n">riskPredisposition</span><span class="o">**</span><span
                class="mi">2</span><span class="p">):</span> <span class="c1"># Check this parameters!!! [C] </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">techawareness</span> <span
                class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="s2">&quot;Agent &quot;</span><span
                class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span
                class="p">,</span> <span class="s2">&quot; H=&quot;</span><span class="p">,</span> <span
                class="bp">self</span><span class="o">.</span><span class="n">health</span><span class="p">,</span>
        <span class="s2">&quot; just discovered the available technologies&quot;</span></div>

    <div class="viewcode-block" id="agents.invAssessment"><a class="viewcode-back"
                                                             href="../../../lib.classes.html#lib.classes.agents.agents.invAssessment">[docs]</a>
        <span class="k">def</span> <span class="nf">invAssessment</span><span class="p">(</span><span
                class="bp">self</span><span class="p">,</span><span class="n">tmpTechs</span><span
                class="p">,</span><span class="n">tmpTechsID</span><span class="p">,</span><span
                class="n">tmpTime</span><span class="p">,</span><span class="n">tmpAgents</span><span class="p">,</span><span
                class="n">tmpPolicies</span><span class="p">,</span><span class="n">tmpAgroPrice</span><span
                class="p">,</span> <span class="n">tmp_dynFileFID</span><span class="p">,</span> <span class="n">tmpCreditAssessment</span><span
                class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
        <span class="sd">			Function to assess the possible investment</span>
        <span class="sd">		</span>
        <span class="sd">		&#39;&#39;&#39;</span>
        <span class="c1"># first position the policy, second position the total amount of used incentive. To update only if a new technology is used. </span>
        <span class="n">tmpPolicyAmountToRemove</span> <span class="o">=</span> <span class="p">[</span><span
                class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># Evaluate the technology awareness of the agent</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">awarenessAssessment</span><span
                class="p">()</span>

        <span class="k">if</span> <span class="mi">12</span> <span class="o">-</span> <span class="n">ran</span><span
                class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span
                class="p">,</span><span class="mi">12</span><span class="p">)</span> <span class="o">==</span> <span
                class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">	\_ AGENT &quot;</span><span
                class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span
                class="p">,</span> <span class="s2">&quot; is assessing its strategy&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">  	 \_ Total balance: &quot;</span><span
                class="p">,</span> <span class="s2">u&quot;</span><span class="se">\u20AC</span><span
                class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span
                class="si">%.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span
                class="bp">self</span><span class="o">.</span><span class="n">balance</span><span class="p">,</span>
        <span class="s2">&quot; M: &quot;</span><span class="p">,</span> <span class="s2">u&quot;</span><span
                class="se">\u20AC</span><span class="s2">&quot;</span><span class="p">,</span> <span
                class="s2">&quot;</span><span class="si">%.2f</span><span class="s2">&quot;</span> <span
                class="o">%</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">month_balance</span><span class="p">,</span> <span class="s2">&quot; CO2: &quot;</span><span
                class="p">,</span> <span class="s2">&quot;</span><span class="si">%.4f</span><span
                class="s2">&quot;</span> <span class="o">%</span><span class="bp">self</span><span
                class="o">.</span><span class="n">co2</span>
        <span class="c1"># If the agent is in health</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">flagFree</span> <span class="o">==</span> <span class="bp">True</span><span class="p">)</span>
        <span class="o">&amp;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">techawareness</span> <span class="o">==</span> <span class="bp">True</span><span
                class="p">):</span>
        <span class="c1"># Define technology attraction list</span>
        <span class="n">relativeAttractions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">defineTechAttraction</span><span class="p">(</span><span class="n">tmpTechs</span><span
                class="p">,</span> <span class="n">tmpAgents</span><span class="p">)</span>
        <span class="c1"># Create a list with all the available technologies (not already used by the agent)</span>
        <span class="n">tmpAvaiableTechs</span> <span class="o">=</span> <span class="nb">list</span><span
                class="p">(</span><span class="nb">set</span><span class="p">(</span><span
                class="n">tmpTechsID</span><span class="p">)</span><span class="o">.</span><span
                class="n">difference</span><span class="p">(</span><span class="nb">set</span><span
                class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">nrgTechsReceipt</span><span class="p">)))</span>
        <span class="n">cnt</span> <span class="o">=</span> <span class="mi">0</span> <span
                class="c1"># counter	</span>
        <span class="n">tmpCurrentAnnualCosts</span> <span class="o">=</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">month_balance</span> <span class="o">*</span> <span
                class="mi">12</span> <span class="c1"># Compute current annual costs</span>
        <span class="c1"># .. If there are available technologies </span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span
                class="n">tmpAvaiableTechs</span><span class="p">)</span> <span class="o">&gt;</span> <span
                class="mi">0</span><span class="p">:</span>
        <span class="n">npvList</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># List of all net present values</span>
        <span class="n">pbpList</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># List of all payback periods</span>
        <span class="n">recList</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># List of all the possible technology recepits</span>
        <span class="n">polList</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># List of all the total amount of policy used. </span>
        <span class="n">supData</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># List of all the supplier in case of bioenergy </span>
        <span class="n">pCosts</span> <span class="o">=</span> <span class="p">[]</span> <span class="c1"># List of all the plant costs</span>

        <span class="c1"># FOR EACH NEW TECHNOLOGY....</span>
        <span class="k">for</span> <span class="n">sngTechID</span> <span class="ow">in</span> <span class="n">tmpAvaiableTechs</span><span
                class="p">:</span>
        <span class="k">if</span> <span class="n">tmpTime</span> <span class="o">&gt;=</span> <span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">sngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">startTime</span><span class="p">:</span> <span
                class="c1"># If the introduction time is valid for the tecnology</span>
        <span class="n">tmpHypCosts</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># hypothetical costs according to this new technology</span>
        <span class="n">tmpPolAmount</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># temporary variable containing the total amount of policy theoretically used with this tech	</span>

        <span class="c1"># Compute the hypothetic annual costs due to the new technology implementation</span>
        <span class="c1"># .. New tech max energy production, the size of the energy partition changes according to the solar orientation of the agent</span>

        <span class="c1">#############################################################################################</span>
        <span class="c1"># BIONERGY ASSESSMENT (If the agent has a potential bioenergy resource, so he may exploit it) </span>
        <span class="c1">#############################################################################################</span>

        <span class="c1"># Compute the overall bio energy potential yield </span>
        <span class="c1"># hectares * tons_per_ha * kwh_x_tons / 12 month</span>
        <span class="n">bioEnergyMonthPotentialYield</span> <span class="o">=</span> <span class="nb">float</span><span
                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ha</span><span
                class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">TxHA_yield_month</span> <span class="o">*</span> <span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">fromTons2kWhmese</span>

        <span class="n">tempSupplierData</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">solarBased</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="o">&amp;</span> <span class="p">(</span><span class="n">bioEnergyMonthPotentialYield</span> <span
                class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
        <span class="c1"># Plant Energy Potential</span>
        <span class="n">plantPotential</span> <span class="o">=</span> <span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">plantDimension</span> <span class="o">*</span> <span class="nb">float</span><span
                class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">bioHoursXMonth</span><span class="p">)</span>
        <span class="c1"># If the agent has an agri dimension and it is not a client for an other agent</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">ha</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span
                class="o">&amp;</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span
                class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">)</span>
        <span class="o">==</span> <span class="mi">0</span><span class="p">):</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">print</span> <span
                class="s2">&quot;bioenergy assessment - agent &quot;</span><span class="p">,</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">ID</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">print</span> <span
                class="s2">&quot;ettari &quot;</span><span class="p">,</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">ha</span><span class="p">,</span> <span class="s2">&quot; - nrg pot: &quot;</span><span
                class="p">,</span> <span class="n">bioEnergyMonthPotentialYield</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">print</span> <span
                class="s2">&quot;Firms sorted by distance&quot;</span>

        <span class="c1"># List of candidate suppliers</span>
        <span class="n">candidateSorted</span> <span class="o">=</span> <span class="nb">sorted</span><span
                class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span
                class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">distanceList</span><span class="p">)),</span> <span class="n">key</span><span
                class="o">=</span><span class="k">lambda</span> <span class="n">k</span><span class="p">:</span> <span
                class="bp">self</span><span class="o">.</span><span class="n">distanceList</span><span
                class="p">[</span><span class="n">k</span><span class="p">])</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">print</span> <span
                class="s2">&quot;Sorted suppliers candidates: &quot;</span><span class="p">,</span> <span class="n">candidateSorted</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span> <span class="s2">&quot;Plant power: &quot;</span><span class="p">,</span> <span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">sngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">plantDimension</span> <span class="o">*</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bioHoursXMonth</span><span
                class="p">,</span> \
        <span class="s2">&quot; kWh/month -&gt; Profit: &quot;</span><span class="p">,</span> <span
                class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">plantDimension</span> <span class="o">*</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">bioHoursXMonth</span> <span class="o">*</span> <span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">cost</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span
                class="p">)</span> \
        <span class="o">+</span> <span class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">plantDimension</span> <span class="o">*</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">bioHoursXMonth</span> <span class="o">*</span> <span class="n">tmpPolicies</span><span
                class="p">[</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">policy</span><span class="p">]</span><span class="o">.</span><span
                class="n">feedIN</span><span class="p">)</span> \
        <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">totEnergyNeed</span> <span class="o">*</span> <span class="n">tmpTechs</span><span
                class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span
                class="n">cost</span><span class="p">)</span>

        <span class="c1"># Total potential energy to bye at month!!!</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span> <span class="s2">&quot;Plant Theoretical Total Power: &quot;</span><span class="p">,</span>
        <span class="n">plantPotential</span>
        <span class="k">print</span> <span class="s2">&quot;Bio Energy Potential: &quot;</span><span class="p">,</span>
        <span class="n">bioEnergyMonthPotentialYield</span>
        <span class="nb">raw_input</span><span class="p">(</span><span
                class="s2">&quot;-- Energy Potentials -- &quot;</span><span class="p">)</span>

        <span class="n">nrgPotToBuy</span> <span class="o">=</span> <span class="n">plantPotential</span> <span
                class="o">-</span> <span class="n">bioEnergyMonthPotentialYield</span>
        <span class="n">purchaseCost</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span> <span class="s2">&quot;Year Crop Needs: &quot;</span><span class="p">,</span> <span
                class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">bioHoursXMonth</span><span class="p">)</span> <span class="o">/</span> <span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">fromTons2kWhmese</span> <span class="o">*</span> <span class="mi">12</span>
        <span class="k">print</span> <span class="s2">&quot;Unitary Cost: &quot;</span><span class="p">,</span> <span
                class="p">(</span><span class="mi">1500</span> <span class="o">*</span> <span
                class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">bioHoursXMonth</span><span class="p">)</span> <span class="o">/</span> <span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">fromTons2kWhmese</span> <span class="o">*</span> <span class="mi">12</span><span
                class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">TxHA_yield</span>
        <span class="nb">raw_input</span><span class="p">(</span><span
                class="s2">&quot;-- Years Costs-- &quot;</span><span class="p">)</span>

        <span class="c1"># For each candidate technology</span>
        <span class="k">for</span> <span class="n">tid</span><span class="p">,</span> <span class="n">i</span> <span
                class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">candidateSorted</span><span
                class="p">):</span>
        <span class="n">temp_i_kwh</span> <span class="o">=</span> <span class="n">tmpAgents</span><span
                class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span
                class="n">residualHa</span> <span class="o">*</span> <span class="n">tmpAgents</span><span
                class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span
                class="n">TxHA_yield_month</span> <span class="o">*</span> <span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">fromTons2kWhmese</span>
        <span class="k">if</span> <span class="n">nrgPotToBuy</span> <span class="o">&gt;</span> <span
                class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">tid</span> <span class="o">&gt;</span> <span class="mi">0</span><span
                class="p">:</span> <span class="c1"># Exlude itself</span>
        <span class="c1"># If trading the potential energy is better than producing normal crop</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span> <span class="s2">&quot;Energy Sale: &quot;</span><span class="p">,</span><span
                class="n">temp_i_kwh</span> <span class="o">*</span> <span class="mf">0.15</span><span
                class="p">,</span>\
        <span class="s2">&quot; - crop price: &quot;</span><span class="p">,</span> <span
                class="n">tmpAgents</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span
                class="o">.</span><span class="n">residualHa</span> <span class="o">*</span> <span
                class="bp">self</span><span class="o">.</span><span class="n">TxHA_yield_month</span> <span
                class="o">*</span> <span class="n">tmpAgroPrice</span><span class="p">;</span> <span class="nb">raw_input</span><span
                class="p">(</span><span class="s2">&quot;cioa&quot;</span><span class="p">)</span>
        <span class="c1">#(tmpAgents[i].residualHa * tmpAgents[i].TxHA_yield_month * tmpTechs[sngTechID].fromTons2kWhmese * 0.15) &gt; (tmpAgents[i].residualHa * tmpAgents[i].TxHA_yield_month * tmpAgroPrice)		   </span>
        <span class="k">if</span> <span class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span class="n">fromTons2kWhmese</span>
        <span class="o">*</span> <span class="mf">0.15</span><span class="p">)</span> <span class="o">&gt;</span> <span
                class="p">(</span><span class="n">tmpAgroPrice</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">temp_i_kwh</span> <span class="o">&gt;</span> <span class="n">nrgPotToBuy</span><span
                class="p">:</span>
        <span class="n">tempSupplierData</span><span class="o">.</span><span class="n">append</span><span
                class="p">([</span><span class="n">i</span><span class="p">,</span><span
                class="n">nrgPotToBuy</span><span class="p">])</span>
        <span class="n">purchaseCost</span> <span class="o">+=</span> <span class="n">nrgPotToBuy</span> <span
                class="o">*</span> <span class="mf">0.15</span> <span class="o">*</span> <span class="p">(</span><span
                class="bp">self</span><span class="o">.</span><span class="n">distanceList</span><span
                class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">*</span> <span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">sngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">transportCosts</span><span class="p">)</span>
        <span class="n">nrgPotToBuy</span> <span class="o">-=</span> <span class="n">nrgPotToBuy</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">nrgPotToBuy</span> <span class="o">-=</span> <span class="n">temp_i_kwh</span>
        <span class="n">tempSupplierData</span><span class="o">.</span><span class="n">append</span><span
                class="p">([</span><span class="n">i</span><span class="p">,</span><span
                class="n">temp_i_kwh</span><span class="p">])</span>
        <span class="n">purchaseCost</span> <span class="o">+=</span> <span class="n">temp_i_kwh</span> <span class="o">*</span>
        <span class="mf">0.15</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span
                class="o">.</span><span class="n">distanceList</span><span class="p">[</span><span
                class="n">i</span><span class="p">]</span> <span class="o">*</span> <span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">transportCosts</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">print</span> <span
                class="s2">&quot;</span><span class="se">\t</span><span class="s2"> Agente: &quot;</span><span
                class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s2">&quot; ettari residui: &quot;</span><span
                class="p">,</span> <span class="n">tmpAgents</span><span class="p">[</span><span class="n">i</span><span
                class="p">]</span><span class="o">.</span><span class="n">residualHa</span><span class="p">,</span>
        <span class="s2">&quot; potenziale &quot;</span><span class="p">,</span> <span class="n">temp_i_kwh</span><span
                class="p">,</span>\
        <span class="s2">&quot; nrgbought: &quot;</span><span class="p">,</span> <span class="n">nrgPotToBuy</span><span
                class="p">,</span> <span class="s2">&quot; spesa: &quot;</span><span class="p">,</span> <span class="n">purchaseCost</span><span
                class="p">,</span> <span class="s2">&quot; - NRG sprecata &quot;</span><span class="p">,</span> <span
                class="n">nrgPotToBuy</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span> <span class="k">print</span> <span
                class="n">tempSupplierData</span>


        <span class="k">if</span> <span class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">solarBased</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="o">&amp;</span> <span class="p">(</span><span class="n">bioEnergyMonthPotentialYield</span> <span
                class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span> <span class="c1"># If bio-energy</span>
        <span class="n">tmpNewNrgProp</span> <span class="o">=</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">totEnergyNeed</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1"># if solar</span>
        <span class="n">tmpNewNrgProp</span> <span class="o">=</span> <span class="nb">int</span><span
                class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">ran</span><span
                class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span
                class="p">,</span><span class="bp">self</span><span class="o">.</span><span
                class="n">totEnergyNeed</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span
                class="nb">pow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">solar_potential</span><span class="p">,</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">solarBased</span><span class="p">))))</span>

        <span class="k">if</span> <span class="n">tmpNewNrgProp</span> <span class="o">&gt;</span> <span
                class="mi">0</span><span class="p">:</span>
        <span class="n">tmpNrgPropReceipt</span> <span class="o">=</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">rearrangeTechPropList</span><span class="p">(</span><span class="n">tmpNewNrgProp</span><span
                class="p">)</span> <span class="c1"># Create a temporary new energy proportion list </span>
        <span class="c1"># Compute the overall cost of the plan according to the relation between kWh and kW. </span>
        <span class="k">if</span> <span class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">solarBased</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="o">&amp;</span> <span class="p">(</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">fromTons2kWhmese</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
        <span class="c1">#(BIOENERGY)</span>
        <span class="n">tmpOverallPlantCost</span> <span class="o">=</span> <span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">plantDimension</span> <span class="o">*</span> <span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">plantCost</span>
        <span class="k">else</span><span class="p">:</span> <span
                class="c1"># In case of non bioenergy investment</span>
        <span class="n">tmpOverallPlantCost</span> <span class="o">=</span> <span class="nb">float</span><span
                class="p">(</span><span class="n">tmpNewNrgProp</span><span class="p">)</span> <span class="o">/</span>
        <span class="n">tmpTechs</span><span class="p">[</span><span class="n">sngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">fromKWH2KW</span> <span class="o">*</span>
        <span class="n">tmpTechs</span><span class="p">[</span><span class="n">sngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">plantCost</span>

        <span class="c1"># Append all the overall cost for the financial assessment 	</span>
        <span class="n">pCosts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
                class="n">tmpOverallPlantCost</span><span class="o">*</span><span class="p">(</span><span
                class="mi">1</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span
                class="n">int_capital</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">tmpOverallPlantCost</span><span class="o">*</span><span
                class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="bp">self</span><span
                class="o">.</span><span class="n">int_capital</span><span class="p">)</span> <span class="o">==</span>
        <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">pCosts</span>
        <span class="k">print</span> <span class="n">tmpOverallPlantCost</span>
        <span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">int_capital</span>
        <span class="k">print</span> <span class="n">tmpNewNrgProp</span>
        <span class="k">print</span> <span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">fromKWH2KW</span>
        <span class="k">print</span> <span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">plantCost</span>
        <span class="nb">raw_input</span><span class="p">(</span><span class="s2">&quot;cusie&quot;</span><span
                class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">print</span> <span
                class="s2">&quot;overall plant cost:&quot;</span><span class="p">,</span> <span class="n">tmpOverallPlantCost</span><span
                class="p">;</span> <span class="nb">raw_input</span><span class="p">(</span><span class="s2">&quot;---plant overall cost---&quot;</span><span
                class="p">)</span>

        <span class="c1"># -------------------------------</span>
        <span class="c1"># FOR THE YEARS OF THE INVESTMENT</span>
        <span class="c1"># ------------------------------- </span>
        <span class="n">netPresentValue</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">payBackPeriod</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">cashFlow</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span
                class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span
                class="bp">self</span><span class="o">.</span><span class="n">invLength</span> <span class="o">+</span>
        <span class="mi">1</span><span class="p">):</span>
        <span class="c1"># Compute costs and intentives of the year</span>
        <span class="n">tmpCostsAndIncs</span> <span class="o">=</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">computeAnnualCostandIncs</span><span class="p">(</span><span
                class="n">sngTechID</span><span class="p">,</span> <span class="n">tmpNewNrgProp</span><span
                class="p">,</span> <span class="n">tmpNrgPropReceipt</span><span class="p">,</span> <span class="n">tmpTechs</span><span
                class="p">,</span> <span class="n">tmpPolicies</span><span class="p">,</span> <span class="n">relativeAttractions</span><span
                class="p">,</span> <span class="n">tmpOverallPlantCost</span><span class="p">,</span> <span
                class="n">y</span><span class="p">)</span>

        <span class="n">tmpHypCosts</span> <span class="o">=</span> <span class="n">tmpCostsAndIncs</span><span
                class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># If bioenergy hypotetic costs must be incremented with the purchase of external biomass and decreased with energy produced and sold</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">solarBased</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="o">&amp;</span> <span class="p">(</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">fromTons2kWhmese</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span
                class="n">tempSupplierData</span><span class="p">)</span> <span class="o">&gt;</span> <span
                class="mi">0</span><span class="p">:</span>
        <span class="n">tmpHypCosts</span> <span class="o">+=</span> <span class="n">purchaseCost</span> <span
                class="o">*</span> <span class="mi">12</span>

        <span class="c1"># Compute costs related to the plant potential exceeding the internal demand		</span>
        <span class="n">tmpHypCosts</span> <span class="o">+=</span> <span class="p">((</span><span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">sngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">plantDimension</span> <span class="o">*</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bioHoursXMonth</span> <span
                class="o">*</span> <span class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">efficiency</span><span class="o">**</span><span class="n">y</span><span class="p">))</span>
        <span class="o">-</span> \
        <span class="p">(</span><span class="n">tmpNewNrgProp</span> <span class="o">*</span> <span
                class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">efficiency</span><span class="o">**</span><span class="n">y</span><span class="p">)))</span>
        <span class="o">*</span> \
        <span class="p">(</span><span class="n">tmpPolicies</span><span class="p">[</span><span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">sngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">policy</span><span class="p">]</span><span
                class="o">.</span><span class="n">carbonTax</span> <span class="o">+</span> <span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">sngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">cost</span> <span class="o">-</span> <span
                class="n">tmpPolicies</span><span class="p">[</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">policy</span><span class="p">]</span><span class="o">.</span><span
                class="n">feedIN</span><span class="p">)</span> <span class="o">*</span> <span class="mi">12</span>

        <span class="n">tmpPolAmount</span> <span class="o">+=</span> <span class="n">tmpCostsAndIncs</span><span
                class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">tmpEXTplantCost</span> <span class="o">=</span> <span class="n">tmpCostsAndIncs</span><span
                class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">tmpINTplantCost</span> <span class="o">=</span> <span class="n">tmpCostsAndIncs</span><span
                class="p">[</span><span class="mi">3</span><span class="p">]</span>
        <span class="n">wacc</span> <span class="o">=</span> <span class="n">tmpCostsAndIncs</span><span
                class="p">[</span><span class="mi">4</span><span class="p">]</span>
        <span class="c1"># Reset cash flow for this year</span>
        <span class="n">cashFlow</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># Compute the tax-credit-investment for the years of the incentive</span>
        <span class="n">tmpCredInv</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">y</span> <span class="o">&lt;=</span> <span
                class="p">(</span><span class="n">tmpPolicies</span><span class="p">[</span><span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">sngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">policy</span><span class="p">]</span><span
                class="o">.</span><span class="n">length</span> <span class="o">/</span> <span class="mi">12</span><span
                class="p">))</span> <span class="o">&amp;</span> <span class="p">(</span><span
                class="n">tmpPolicies</span><span class="p">[</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">policy</span><span class="p">]</span><span class="o">.</span><span
                class="n">taxCreditInv</span> <span class="o">&gt;</span> <span class="mi">0</span><span
                class="p">):</span>
        <span class="n">tmpCredInv</span> <span class="o">+=</span> <span class="n">tmpOverallPlantCost</span> <span
                class="o">*</span> <span class="n">tmpPolicies</span><span class="p">[</span><span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">sngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">policy</span><span class="p">]</span><span
                class="o">.</span><span class="n">taxCreditInv</span> <span class="o">/</span> \
        <span class="p">(</span><span class="n">tmpPolicies</span><span class="p">[</span><span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">sngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">policy</span><span class="p">]</span><span
                class="o">.</span><span class="n">length</span> <span class="o">/</span> <span class="mi">12</span><span
                class="p">)</span>
        <span class="c1"># (3) Since tax credit investment has been theoretically used, it is updated</span>
        <span class="n">tmpPolAmount</span> <span class="o">+=</span> <span class="n">tmpCredInv</span>

        <span class="c1"># Compute annual interest to pay for the YEARS of the loan</span>
        <span class="k">if</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="p">(</span><span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">sngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">loanLength</span> <span class="o">/</span>
        <span class="mi">12</span><span class="p">):</span>
        <span class="c1"># Compute clean annual interest</span>
        <span class="n">tmpAnnualInterest</span> <span class="o">=</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">computeLoanAnnualInterest</span><span class="p">(</span><span
                class="n">tmpEXTplantCost</span><span class="p">,</span> <span class="p">(</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">loanLength</span> <span class="o">/</span> <span class="mi">12</span><span class="p">),</span>
        <span class="n">tmpTechs</span><span class="p">[</span><span class="n">sngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">interestRate</span><span class="p">)</span>
        <span class="c1"># If there is an incentive on the interest</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">y</span> <span class="o">&lt;=</span> <span
                class="p">(</span><span class="n">tmpPolicies</span><span class="p">[</span><span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">sngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">policy</span><span class="p">]</span><span
                class="o">.</span><span class="n">length</span> <span class="o">/</span> <span class="mi">12</span><span
                class="p">))</span> <span class="o">&amp;</span> <span class="p">(</span><span
                class="n">tmpPolicies</span><span class="p">[</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">policy</span><span class="p">]</span><span class="o">.</span><span class="n">taxCredit</span>
        <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">tmpIntRate</span> <span class="o">=</span> <span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">interestRate</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span>
        <span class="o">-</span> <span class="n">tmpPolicies</span><span class="p">[</span><span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">sngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">policy</span><span class="p">]</span><span
                class="o">.</span><span class="n">taxCredit</span><span class="p">)</span>
        <span class="n">tmpAnnualInterestWithInc</span> <span class="o">=</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">computeLoanAnnualInterest</span><span class="p">(</span><span
                class="n">tmpEXTplantCost</span><span class="p">,</span> <span class="p">(</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">loanLength</span> <span class="o">/</span> <span class="mi">12</span><span class="p">),</span>
        <span class="n">tmpIntRate</span><span class="p">)</span>
        <span class="c1"># (4) Since tax credit interest has been theoretically used, it is updated</span>
        <span class="n">tmpPolAmount</span> <span class="o">+=</span> <span class="n">tmpAnnualInterest</span> <span
                class="o">-</span> <span class="n">tmpAnnualInterestWithInc</span>
        <span class="n">tmpAnnualInterest</span> <span class="o">=</span> <span
                class="n">tmpAnnualInterestWithInc</span>

        <span class="c1"># Investment credit + annual savings - interests - credit capital </span>
        <span class="c1">#print tmpCurrentAnnualCosts</span>
        <span class="c1">#print tmpHypCosts</span>
        <span class="c1">#raw_input(&quot;cioa&quot;)</span>
        <span class="n">cashFlow</span> <span class="o">=</span> <span class="n">tmpCredInv</span> <span
                class="o">+</span> <span class="p">(</span><span class="n">tmpCurrentAnnualCosts</span> <span class="o">-</span>
        <span class="n">tmpHypCosts</span><span class="p">)</span> <span class="o">-</span> <span class="n">tmpAnnualInterest</span>
        <span class="o">-</span> <span class="p">(</span><span class="n">tmpEXTplantCost</span> <span class="o">/</span>
        <span class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">loanLength</span> <span class="o">/</span> <span class="mi">12</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Investment credit + annual savings</span>
        <span class="n">cashFlow</span> <span class="o">=</span> <span class="n">tmpCredInv</span> <span
                class="o">+</span> <span class="p">(</span><span class="n">tmpCurrentAnnualCosts</span> <span class="o">-</span>
        <span class="n">tmpHypCosts</span><span class="p">)</span>

        <span class="c1"># if there is equity capital it is spent in the first year</span>
        <span class="k">if</span> <span class="p">((</span><span class="n">y</span> <span class="o">==</span> <span
                class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span
                class="n">tmpINTplantCost</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)):</span>
        <span class="n">cashFlow</span> <span class="o">-=</span> <span class="n">tmpINTplantCost</span>
        <span class="c1"># Compute in progress NPV</span>
        <span class="n">netPresentValue</span> <span class="o">+=</span> <span class="n">cashFlow</span> <span
                class="o">/</span> <span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span
                class="mi">1</span><span class="o">+</span><span class="n">wacc</span><span class="p">,</span><span
                class="n">y</span><span class="p">))</span>
        <span class="c1">#print &quot;CF: &quot;, cashFlow, &quot; cred: &quot;, tmpCredInv, &quot; + (HC: &quot;,tmpCurrentAnnualCosts, &quot; - h: &quot;, tmpHypCosts, &quot;) - INT &quot;, tmpAnnualInterest,\</span>
        <span class="c1">#      &quot; = NPV: &quot;, netPresentValue, &quot; - PLANT: &quot;, tmpOverallPlantCost, &quot; delta: %.2f&quot; % (netPresentValue - tmpOverallPlantCost), &quot; dim: &quot;, tmpNewNrgProp</span>
        <span class="c1"># Compute paybackPeriod</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">netPresentValue</span> <span
                class="o">&gt;=</span> <span class="n">tmpOverallPlantCost</span><span class="p">)</span> <span
                class="o">&amp;</span> <span class="p">(</span><span class="n">payBackPeriod</span> <span
                class="o">==</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">payBackPeriod</span> <span class="o">=</span> <span class="n">y</span>


        <span class="c1"># .. Compute final net present value</span>
        <span class="n">netPresentValue</span> <span class="o">-=</span> <span class="n">tmpOverallPlantCost</span>

        <span class="c1"># Append analysis value in lists </span>
        <span class="n">npvList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
                class="n">netPresentValue</span><span class="p">)</span>
        <span class="n">pbpList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
                class="n">payBackPeriod</span><span class="p">)</span>
        <span class="n">recList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
                class="n">tmpNrgPropReceipt</span><span class="p">)</span>
        <span class="n">polList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
                class="n">tmpPolAmount</span><span class="p">)</span>
        <span class="n">supData</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
                class="n">tempSupplierData</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span> <span class="s2">&quot;NPV: &quot;</span><span class="p">,</span> <span class="n">npvList</span>
        <span class="k">print</span> <span class="s2">&quot;PBP: &quot;</span><span class="p">,</span> <span class="n">pbpList</span>
        <span class="k">print</span> <span class="s2">&quot;tmpNrgPropReceipt: &quot;</span><span class="p">,</span>
        <span class="n">tmpNrgPropReceipt</span>
        <span class="k">print</span> <span class="s2">&quot;tmpPolAmount: &quot;</span><span class="p">,</span> <span
                class="n">tmpPolAmount</span>
        <span class="k">print</span> <span class="s2">&quot;supdata: &quot;</span><span class="p">,</span> <span
                class="n">supData</span>
        <span class="nb">raw_input</span><span class="p">(</span><span class="s2">&quot;push to continue...&quot;</span><span
                class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
        <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2">  	  |- Tech: &quot;</span><span
                class="p">,</span> <span class="n">cnt</span><span class="p">,</span> <span
                class="s2">&quot; NPV: </span><span class="si">%10.2f</span><span class="s2">&quot;</span> <span
                class="o">%</span> <span class="n">netPresentValue</span><span class="p">,</span> <span class="s2">&quot; PBP: &quot;</span><span
                class="p">,</span> <span class="n">payBackPeriod</span>

        <span class="n">cnt</span> <span class="o">=</span> <span class="n">cnt</span> <span class="o">+</span> <span
                class="mi">1</span> <span class="c1"># Available technology Counter update</span>

        <span class="c1"># .. Compute the better technology (IF the PBP is satisfied the technology with the better NPV is selected)</span>
        <span class="n">betterTechPos</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">betterNPV</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">betterPayBack</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">npvList</span><span
                class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">tmpFinID</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#print npvList</span>
        <span class="c1">#print pbpList</span>
        <span class="c1">#raw_input(&quot;fio&quot;)</span>
        <span class="k">for</span> <span class="n">s_id</span><span class="p">,</span> <span class="n">sngPbpList</span>
        <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span
                class="n">pbpList</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">sngPbpList</span> <span class="o">&gt;</span>
        <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span
                class="n">sngPbpList</span> <span class="o">&lt;</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">invLength</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">npvList</span><span class="p">[</span><span
                class="n">tmpFinID</span><span class="p">]</span> <span class="o">&gt;</span> <span
                class="n">betterNPV</span><span class="p">:</span>
        <span class="c1"># Ask for the financial aid [C]. </span>
        <span class="c1"># The health of the firm is rescaled with relative cost of the plant</span>
        <span class="k">if</span> <span class="n">tmpCreditAssessment</span> <span class="o">==</span> <span class="mi">1</span><span
                class="p">:</span>
        <span class="k">if</span> <span class="n">pCosts</span><span class="p">[</span><span class="n">s_id</span><span
                class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">tmpNum</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span> <span class="n">tmpNum</span> <span class="o">=</span> <span
                class="n">pCosts</span><span class="p">[</span><span class="n">s_id</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">min</span><span class="p">(</span><span class="n">pCosts</span><span
                class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">tmpDem</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span> <span class="n">tmpDem</span> <span class="o">=</span> <span
                class="nb">min</span><span class="p">(</span><span class="n">pCosts</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span> <span class="p">(</span><span class="bp">self</span><span
                class="o">.</span><span class="n">health</span> <span class="o">/</span> <span class="p">(</span><span
                class="n">tmpNum</span><span class="o">/</span><span class="n">tmpDem</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">tmpOverallPlantCost</span>
        <span class="k">print</span> <span class="n">pCosts</span>
        <span class="k">print</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">int_capital</span>
        <span class="k">if</span> <span class="n">ran</span><span class="o">.</span><span class="n">random</span><span
                class="p">()</span> <span class="o">&lt;</span> <span class="p">(</span><span
                class="bp">self</span><span class="o">.</span><span class="n">health</span> <span class="o">/</span>
        <span class="p">(</span><span class="n">tmpNum</span><span class="o">/</span><span class="n">tmpDem</span><span
                class="p">)):</span>
        <span class="n">betterNPV</span> <span class="o">=</span> <span class="n">npvList</span><span class="p">[</span><span
                class="n">tmpFinID</span><span class="p">]</span>
        <span class="n">betterTechPos</span> <span class="o">=</span> <span class="n">tmpFinID</span>
        <span class="n">betterPayBack</span> <span class="o">=</span> <span class="n">sngPbpList</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">betterNPV</span> <span class="o">=</span> <span class="n">npvList</span><span class="p">[</span><span
                class="n">tmpFinID</span><span class="p">]</span>
        <span class="n">betterTechPos</span> <span class="o">=</span> <span class="n">tmpFinID</span>
        <span class="n">betterPayBack</span> <span class="o">=</span> <span class="n">sngPbpList</span>
        <span class="c1">#else:</span>
        <span class="c1">#	betterNPV = npvList[tmpFinID]</span>
        <span class="c1">#	betterTechPos = tmpFinID</span>
        <span class="c1">#	betterPayBack = sngPbpList</span>
        <span class="n">tmpFinID</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="c1"># If there is a positive maximum net present value</span>
        <span class="k">if</span> <span class="n">betterNPV</span> <span class="o">&gt;</span> <span class="mi">0</span><span
                class="p">:</span>
        <span class="n">tmpRnd</span> <span class="o">=</span> <span class="n">ran</span><span class="o">.</span><span
                class="n">random</span><span class="p">()</span>
        <span class="c1">#print self.invLength, &quot; &quot;, betterPayBack, &quot; &quot;, self.health</span>
        <span class="c1">#print tmpRnd</span>
        <span class="k">if</span> <span class="n">tmpRnd</span> <span class="o">&lt;</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">genLogFun</span><span class="p">((</span><span
                class="bp">self</span><span class="o">.</span><span class="n">invLength</span> <span class="o">-</span>
        <span class="n">betterPayBack</span><span class="p">),</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">health</span><span class="p">):</span>
        <span class="c1">#print tmpRnd</span>
        <span class="c1">#print self.genLogFun((self.invLength - betterPayBack), self.health)</span>
        <span class="c1">#print betterPayBack</span>
        <span class="c1">#print self.invLength - betterPayBack</span>
        <span class="c1">#raw_input(&quot;random&quot;)</span>

        <span class="c1"># .. If a BETTER new technology exist, it is added to the agent</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">flagFree</span> <span class="o">=</span>
        <span class="bp">False</span> <span class="c1"># Technology search is blocked</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrgTechsReceipt</span><span
                class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmpTechsID</span><span
                class="p">[</span><span class="n">tmpAvaiableTechs</span><span class="p">[</span><span class="n">betterTechPos</span><span
                class="p">]])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrgPropReceipt</span> <span
                class="o">=</span> <span class="n">recList</span><span class="p">[</span><span
                class="n">betterTechPos</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrgTechAges</span><span
                class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span
                class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">techPolicy</span><span
                class="o">.</span><span class="n">append</span><span class="p">([</span><span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">tmpTechsID</span><span
                class="p">[</span><span class="n">tmpAvaiableTechs</span><span class="p">[</span><span class="n">betterTechPos</span><span
                class="p">]]]</span><span class="o">.</span><span class="n">policy</span><span class="p">,</span>\
        <span class="n">tmpPolicies</span><span class="p">[</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">tmpTechsID</span><span class="p">[</span><span class="n">tmpAvaiableTechs</span><span
                class="p">[</span><span class="n">betterTechPos</span><span class="p">]]]</span><span class="o">.</span><span
                class="n">policy</span><span class="p">]</span><span class="o">.</span><span
                class="n">length</span><span class="p">])</span>
        <span class="c1"># ... Compute total interest</span>
        <span class="n">totInterestsToPay</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">iyears</span> <span class="ow">in</span> <span
                class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,(</span><span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">tmpAvaiableTechs</span><span class="p">[</span><span
                class="n">betterTechPos</span><span class="p">]]</span><span class="o">.</span><span class="n">loanLength</span>
        <span class="o">/</span> <span class="mi">12</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">iyears</span> <span class="o">&lt;</span> <span
                class="p">(</span><span class="n">tmpPolicies</span><span class="p">[</span><span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">tmpTechsID</span><span
                class="p">[</span><span class="n">tmpAvaiableTechs</span><span class="p">[</span><span class="n">betterTechPos</span><span
                class="p">]]]</span><span class="o">.</span><span class="n">policy</span><span class="p">]</span><span
                class="o">.</span><span class="n">length</span> <span class="o">/</span> <span class="mi">12</span><span
                class="p">):</span>
        <span class="n">tmpIntRate</span> <span class="o">=</span> <span class="n">tmpTechs</span><span
                class="p">[</span><span class="bp">self</span><span class="o">.</span><span
                class="n">nrgTechsReceipt</span><span class="p">[</span><span class="o">-</span><span
                class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">interestRate</span>
        <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span
                class="n">tmpPolicies</span><span class="p">[</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">tmpTechsID</span><span class="p">[</span><span class="n">tmpAvaiableTechs</span><span
                class="p">[</span><span class="n">betterTechPos</span><span class="p">]]]</span><span class="o">.</span><span
                class="n">policy</span><span class="p">]</span><span class="o">.</span><span
                class="n">taxCredit</span><span class="p">)</span>
        <span class="n">tmpAnnualInterest</span> <span class="o">=</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">computeLoanAnnualInterest</span><span class="p">(</span><span
                class="n">tmpEXTplantCost</span><span class="p">,</span> <span class="p">(</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="bp">self</span><span class="o">.</span><span
                class="n">nrgTechsReceipt</span><span class="p">[</span><span class="o">-</span><span
                class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">loanLength</span>
        <span class="o">/</span> <span class="mi">12</span><span class="p">),</span> <span
                class="n">tmpIntRate</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">tmpAnnualInterest</span> <span class="o">=</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">computeLoanAnnualInterest</span><span class="p">(</span><span
                class="n">tmpEXTplantCost</span><span class="p">,</span> <span class="p">(</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="bp">self</span><span class="o">.</span><span
                class="n">nrgTechsReceipt</span><span class="p">[</span><span class="o">-</span><span
                class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">loanLength</span>
        <span class="o">/</span> <span class="mi">12</span><span class="p">),</span> <span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">sngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">interestRate</span><span class="p">)</span>
        <span class="n">totInterestsToPay</span> <span class="o">+=</span> <span class="n">tmpAnnualInterest</span>

        <span class="n">tmpTotalDept</span> <span class="o">=</span> <span class="n">tmpEXTplantCost</span> <span
                class="o">+</span> <span class="n">totInterestsToPay</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debts</span><span class="o">.</span><span
                class="n">append</span><span class="p">(</span><span class="n">tmpTotalDept</span><span
                class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RemainingDebts</span><span
                class="o">.</span><span class="n">append</span><span class="p">(</span><span
                class="n">tmpTotalDept</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debtTime</span><span class="o">.</span><span
                class="n">append</span><span class="p">(</span><span class="n">tmpTime</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debtLength</span><span
                class="o">.</span><span class="n">append</span><span class="p">((</span><span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">tmpAvaiableTechs</span><span class="p">[</span><span
                class="n">betterTechPos</span><span class="p">]]</span><span class="o">.</span><span class="n">loanLength</span>
        <span class="o">/</span> <span class="mi">12</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debtMonthRepayment</span><span
                class="o">.</span><span class="n">append</span><span class="p">(</span><span
                class="n">tmpTotalDept</span> <span class="o">/</span> <span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">tmpAvaiableTechs</span><span class="p">[</span><span class="n">betterTechPos</span><span
                class="p">]]</span><span class="o">.</span><span class="n">loanLength</span><span class="p">)</span>
        <span class="c1"># Init Inv Payment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">month_balance</span> <span
                class="o">=</span> <span class="n">tmpINTplantCost</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">+=</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">month_balance</span>

        <span class="n">tmpPolicyAmountToRemove</span> <span class="o">=</span> <span class="p">[</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">tmpTechsID</span><span class="p">[</span><span class="n">tmpAvaiableTechs</span><span
                class="p">[</span><span class="n">betterTechPos</span><span class="p">]]]</span><span class="o">.</span><span
                class="n">policy</span><span class="p">,</span> <span class="n">polList</span><span
                class="p">[</span><span class="n">betterTechPos</span><span class="p">]]</span>

        <span class="c1"># IF BIOENERGY, so supplier are added to the suppliers list and the agent is added as client to the distinct suppliers</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">solarBased</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
        <span class="o">&amp;</span> <span class="p">(</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">sngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">fromTons2kWhmese</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">sngData</span> <span class="ow">in</span> <span
                class="n">supData</span><span class="p">[</span><span class="n">betterTechPos</span><span
                class="p">]:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">suppliers</span><span
                class="o">.</span><span class="n">append</span><span class="p">([</span><span
                class="n">sngData</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span
                class="n">sngData</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
        <span class="c1"># Add pot energy supplier</span>
        <span class="c1"># Residual HA to use is decremented</span>
        <span class="n">tmpAgents</span><span class="p">[</span><span class="n">sngData</span><span
                class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span
                class="n">residualHa</span> <span class="o">-=</span> <span class="n">sngData</span><span
                class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">tmpTechsID</span><span
                class="p">[</span><span class="n">tmpAvaiableTechs</span><span class="p">[</span><span class="n">betterTechPos</span><span
                class="p">]]]</span><span class="o">.</span><span class="n">fromTons2kWhmese</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">residualHa</span> <span class="o">=</span>
        <span class="mi">0</span>
        <span class="n">tmpAgents</span><span class="p">[</span><span class="n">sngData</span><span
                class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span
                class="n">client</span><span class="o">.</span><span class="n">append</span><span
                class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span
                class="p">,</span><span class="n">sngData</span><span class="p">[</span><span class="mi">1</span><span
                class="p">]])</span>
        <span class="n">tmpAgents</span><span class="p">[</span><span class="n">sngData</span><span
                class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span
                class="n">techawareness</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="c1"># In case of investment the action of the agent is registered on this file.</span>
        <span class="n">strReg</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span
                class="n">tmpTime</span><span class="p">)</span> <span class="o">+</span> <span
                class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span>
        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">ID</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span
                class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span> <span
                class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span
                class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span> <span
                class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">y</span><span class="p">)</span> <span class="o">+</span> \
        <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span>
        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">totEnergyNeed</span><span class="p">)</span> <span class="o">+</span> <span
                class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span>
        <span class="nb">str</span><span class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">tmpTechsID</span><span class="p">[</span><span class="n">tmpAvaiableTechs</span><span
                class="p">[</span><span class="n">betterTechPos</span><span class="p">]]]</span><span class="o">.</span><span
                class="n">ID</span><span class="p">)</span> <span class="o">+</span> \
        <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span>
        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">riskPredisposition</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span
                class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span> <span
                class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">social_lobby</span><span class="p">)</span> <span class="o">+</span> <span
                class="s1">&#39;</span><span class="se">\t</span><span class="s1">&#39;</span> <span class="o">+</span>
        <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">health</span><span class="p">)</span> <span class="o">+</span> <span
                class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="k">if</span> <span class="n">tmp_dynFileFID</span> <span class="ow">is</span> <span
                class="ow">not</span> <span class="bp">None</span><span class="p">:</span> <span class="n">tmp_dynFileFID</span><span
                class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">strReg</span><span
                class="p">)</span>


        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">debugLevel</span>
        <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> 	    |- Agent &quot;</span><span
                class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID</span><span
                class="p">,</span> <span class="s2">&quot; has invested in a new technology:&quot;</span>
        <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> 	     \_ New Technology List: &quot;</span><span
                class="p">,</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">nrgTechsReceipt</span>
        <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> 	     \_ New Technology Receipt List: &quot;</span><span
                class="p">,</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">nrgPropReceipt</span>
        <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> 	     \_ New Debts List: &quot;</span><span
                class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debts</span>
        <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> 	     \_ New Residual Debts List: &quot;</span><span
                class="p">,</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">RemainingDebts</span>
        <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> 	     \_ New Initial Debts Time List: &quot;</span><span
                class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debtTime</span>
        <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> 	     \_ New Debts Lengths List: &quot;</span><span
                class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debtLength</span>
        <span class="k">print</span> <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> 	     \_ New Debts Month Repayment List: &quot;</span><span
                class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">debtMonthRepayment</span>
        <span class="nb">raw_input</span><span class="p">(</span><span class="s2">&quot;next agent&quot;</span><span
                class="p">)</span>

        <span class="k">return</span> <span class="n">tmpPolicyAmountToRemove</span></div>

    <div class="viewcode-block" id="agents.computeAnnualCostandIncs"><a class="viewcode-back"
                                                                        href="../../../lib.classes.html#lib.classes.agents.agents.computeAnnualCostandIncs">[docs]</a>
        <span class="k">def</span> <span class="nf">computeAnnualCostandIncs</span><span class="p">(</span><span
                class="bp">self</span><span class="p">,</span> <span class="n">tmpSngTechID</span><span
                class="p">,</span> <span class="n">tmp_newNrgProp</span><span class="p">,</span> <span class="n">tmp_NrgPropReceipt</span><span
                class="p">,</span> <span class="n">tmp_techs</span><span class="p">,</span> <span
                class="n">tmp_policies</span><span class="p">,</span> \
        <span class="n">tmpRelativeAttractions</span><span class="p">,</span> <span
                class="n">tmp_overallPlantCost</span><span class="p">,</span> <span class="n">tmpTime</span><span
                class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
        <span class="sd">			This function computes annual costs and annual feed-in incentives according to the technology energy drops</span>
        <span class="sd">			</span>
        <span class="sd">		&#39;&#39;&#39;</span>
        <span class="c1"># .. According to the temporary new tech	 energy proportion the annual cost is computed</span>
        <span class="n">tmpCosts</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">tmpIncsAmount</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># Update values within tmp_NrgPropReceipt according to the year of the theoretical investment</span>
        <span class="n">tmpNewPropWithDrop</span> <span class="o">=</span> <span class="n">tmp_newNrgProp</span> <span
                class="o">*</span> <span class="p">(</span><span class="n">tmp_techs</span><span class="p">[</span><span
                class="n">tmpSngTechID</span><span class="p">]</span><span class="o">.</span><span
                class="n">efficiency</span><span class="o">**</span><span class="n">tmpTime</span><span
                class="p">)</span>
        <span class="c1"># Update the proportion technology list according to the efficiency drop and the year computed</span>
        <span class="n">dynNrgPropReceipt</span> <span class="o">=</span> <span class="n">copy</span><span
                class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">tmp_NrgPropReceipt</span><span
                class="p">)</span>
        <span class="k">for</span> <span class="n">tmpID</span><span class="p">,</span> <span class="n">_</span> <span
                class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">dynNrgPropReceipt</span><span
                class="p">):</span>
        <span class="n">tmpValue</span> <span class="o">=</span> <span class="n">dynNrgPropReceipt</span><span
                class="p">[</span><span class="n">tmpID</span><span class="p">]</span> <span class="o">*</span> <span
                class="p">(</span><span class="n">tmp_techs</span><span class="p">[</span><span
                class="n">tmpID</span><span class="p">]</span><span class="o">.</span><span
                class="n">efficiency</span><span class="o">**</span><span class="n">tmpTime</span><span
                class="p">)</span>
        <span class="n">dynNrgPropReceipt</span><span class="p">[</span><span class="n">tmpID</span><span
                class="p">]</span> <span class="o">=</span> <span class="n">tmpValue</span>
        <span class="k">if</span> <span class="n">tmpID</span> <span class="o">&gt;</span> <span
                class="mi">0</span><span class="p">:</span>
        <span class="n">dynNrgPropReceipt</span><span class="p">[</span><span class="mi">0</span><span
                class="p">]</span> <span class="o">+=</span> <span class="n">tmpValue</span>

        <span class="c1"># For each already present technology according to the new temporary distribution</span>
        <span class="k">for</span> <span class="n">tmpCnt</span><span class="p">,</span> <span
                class="n">tmpNewSngProp</span> <span class="ow">in</span> <span class="nb">enumerate</span><span
                class="p">(</span><span class="n">tmp_NrgPropReceipt</span><span class="p">[:</span><span
                class="o">-</span><span class="mi">1</span><span class="p">]):</span>
        <span class="c1"># Compute distance from source, if distance is 0 this term is 0 and the multiplier does not affect the computation</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">tmp_techs</span><span class="p">[</span><span
                class="bp">self</span><span class="o">.</span><span class="n">nrgTechsReceipt</span><span
                class="p">[</span><span class="n">tmpCnt</span><span class="p">]]</span><span class="o">.</span><span
                class="n">X</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span
                class="o">&amp;</span> <span class="p">(</span><span class="n">tmp_techs</span><span
                class="p">[</span><span class="bp">self</span><span class="o">.</span><span
                class="n">nrgTechsReceipt</span><span class="p">[</span><span class="n">tmpCnt</span><span
                class="p">]]</span><span class="o">.</span><span class="n">Y</span> <span class="o">&gt;</span> <span
                class="mi">0</span><span class="p">):</span>
        <span class="n">tmpDistanceFromSourceMultiplier</span> <span class="o">=</span> <span class="nb">pow</span><span
                class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="nb">abs</span><span
                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span
                class="o">-</span> <span class="n">tmp_techs</span><span class="p">[</span><span
                class="bp">self</span><span class="o">.</span><span class="n">nrgTechsReceipt</span><span
                class="p">[</span><span class="n">tmpCnt</span><span class="p">]]</span><span class="o">.</span><span
                class="n">X</span><span class="p">),</span><span class="mi">2</span><span class="p">)</span> <span
                class="o">+</span> <span class="nb">pow</span><span class="p">(</span><span class="nb">abs</span><span
                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span
                class="o">-</span> <span class="n">tmp_techs</span><span class="p">[</span><span
                class="bp">self</span><span class="o">.</span><span class="n">nrgTechsReceipt</span><span
                class="p">[</span><span class="n">tmpCnt</span><span class="p">]]</span><span class="o">.</span><span
                class="n">Y</span><span class="p">),</span><span class="mi">2</span><span class="p">),</span><span
                class="mf">0.5</span><span class="p">)</span>
        <span class="n">tmpDistanceFromSourceMultiplier</span> <span class="o">*=</span> <span
                class="n">tmp_techs</span><span class="p">[</span><span class="bp">self</span><span
                class="o">.</span><span class="n">nrgTechsReceipt</span><span class="p">[</span><span
                class="n">tmpCnt</span><span class="p">]]</span><span class="o">.</span><span
                class="n">transportCosts</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">tmpDistanceFromSourceMultiplier</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># Costs related to the already present technologies. </span>
        <span class="n">tmpCosts</span> <span class="o">+=</span> <span class="n">tmpNewSngProp</span> <span
                class="o">*</span> \
        <span class="p">(</span><span class="n">tmp_techs</span><span class="p">[</span><span
                class="bp">self</span><span class="o">.</span><span class="n">nrgTechsReceipt</span><span
                class="p">[</span><span class="n">tmpCnt</span><span class="p">]]</span><span class="o">.</span><span
                class="n">cost</span> <span class="o">+</span> \
        <span class="n">tmp_policies</span><span class="p">[</span><span class="bp">self</span><span
                class="o">.</span><span class="n">techPolicy</span><span class="p">[</span><span class="n">tmpCnt</span><span
                class="p">][</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span
                class="n">carbonTax</span> <span class="o">+</span> \
        <span class="n">tmpDistanceFromSourceMultiplier</span> <span class="o">-</span> \
        <span class="n">tmp_policies</span><span class="p">[</span><span class="bp">self</span><span
                class="o">.</span><span class="n">techPolicy</span><span class="p">[</span><span class="n">tmpCnt</span><span
                class="p">][</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span
                class="n">feedIN</span><span class="p">)</span>

        <span class="c1"># (1) Since feedIn has been theoretically used, it is updated</span>
        <span class="n">tmpIncsAmount</span> <span class="o">+=</span> <span class="n">tmpNewSngProp</span> <span
                class="o">*</span> <span class="n">tmp_policies</span><span class="p">[</span><span
                class="bp">self</span><span class="o">.</span><span class="n">techPolicy</span><span
                class="p">[</span><span class="n">tmpCnt</span><span class="p">][</span><span class="mi">0</span><span
                class="p">]]</span><span class="o">.</span><span class="n">feedIN</span>

        <span class="k">if</span> <span class="n">tmp_techs</span><span class="p">[</span><span
                class="bp">self</span><span class="o">.</span><span class="n">nrgTechsReceipt</span><span
                class="p">[</span><span class="n">tmpCnt</span><span class="p">]]</span><span class="o">.</span><span
                class="n">cost</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="c1"># If the cost is negative the energy is sold, so the cost of the traditional energy has to be added </span>
        <span class="n">tmpCosts</span> <span class="o">+=</span> <span class="n">tmpNewSngProp</span> <span
                class="o">*</span> <span class="n">tmp_techs</span><span class="p">[</span><span
                class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">cost</span>

        <span class="c1"># (2) Since feedIn has been theoretically used, it is updated</span>
        <span class="n">tmpIncsAmount</span> <span class="o">+=</span> <span class="n">tmpNewPropWithDrop</span> <span
                class="o">*</span> <span class="n">tmp_policies</span><span class="p">[</span><span
                class="n">tmp_techs</span><span class="p">[</span><span class="n">tmpSngTechID</span><span
                class="p">]</span><span class="o">.</span><span class="n">policy</span><span class="p">]</span><span
                class="o">.</span><span class="n">feedIN</span>

        <span class="n">tmpCosts</span> <span class="o">+=</span> <span class="n">tmpNewPropWithDrop</span> <span
                class="o">*</span> <span class="p">(</span><span class="n">tmp_techs</span><span class="p">[</span><span
                class="n">tmpSngTechID</span><span class="p">]</span><span class="o">.</span><span class="n">cost</span>
        <span class="o">+</span> \
        <span class="n">tmp_policies</span><span class="p">[</span><span class="n">tmp_techs</span><span
                class="p">[</span><span class="n">tmpSngTechID</span><span class="p">]</span><span
                class="o">.</span><span class="n">policy</span><span class="p">]</span><span class="o">.</span><span
                class="n">carbonTax</span> <span class="o">-</span> \
        <span class="n">tmp_policies</span><span class="p">[</span><span class="n">tmp_techs</span><span
                class="p">[</span><span class="n">tmpSngTechID</span><span class="p">]</span><span
                class="o">.</span><span class="n">policy</span><span class="p">]</span><span class="o">.</span><span
                class="n">feedIN</span><span class="p">)</span>

        <span class="c1"># If the cost of the new technology is negative, so the traditional energy must be taken into account</span>
        <span class="k">if</span> <span class="n">tmp_techs</span><span class="p">[</span><span
                class="n">tmpSngTechID</span><span class="p">]</span><span class="o">.</span><span class="n">cost</span>
        <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">tmpCosts</span> <span class="o">+=</span> <span class="n">tmpNewPropWithDrop</span> <span
                class="o">*</span> <span class="n">tmp_techs</span><span class="p">[</span><span
                class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">cost</span>

        <span class="c1"># .. from month to year</span>
        <span class="n">tmpCosts</span> <span class="o">*=</span> <span class="mi">12</span>

        <span class="c1"># .. SOCIAL ATTRACTIVENESS</span>
        <span class="c1"># .. Cost are rescaled according to the imitation list (note that if the socialLobby parameter is 0 the list remains the same)</span>
        <span class="k">for</span> <span class="n">RAcnt</span><span class="p">,</span> <span class="n">sngLobby</span>
        <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tmpRelativeAttractions</span><span
                class="p">):</span>
        <span class="k">if</span> <span class="n">tmpSngTechID</span> <span class="o">==</span> <span
                class="n">RAcnt</span><span class="p">:</span>
        <span class="n">tmpCosts</span> <span class="o">-=</span> <span class="n">tmpCosts</span> <span
                class="o">*</span> <span class="n">sngLobby</span> <span class="o">*</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">social_lobby</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">tmpCosts</span> <span class="o">+=</span> <span class="n">tmpCosts</span> <span
                class="o">*</span> <span class="n">sngLobby</span> <span class="o">*</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">social_lobby</span>

        <span class="c1"># WACC (Weighted Average Cost of Capital) Computation (incentive amount on interests is computed later)</span>
        <span class="n">tmp_INTplantCost</span> <span class="o">=</span> <span class="n">tmp_overallPlantCost</span>
        <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">int_capital</span>
        <span class="n">tmp_EXTplantCost</span> <span class="o">=</span> <span class="n">tmp_overallPlantCost</span>
        <span class="o">-</span> <span class="n">tmp_INTplantCost</span>
        <span class="n">tmp_wacc</span> <span class="o">=</span> <span class="p">(</span><span class="n">tmp_INTplantCost</span>
        <span class="o">/</span> <span class="n">tmp_overallPlantCost</span> <span class="o">*</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">equityCost</span><span class="p">)</span> <span class="o">+</span> \
        <span class="p">((</span><span class="n">tmp_EXTplantCost</span> <span class="o">/</span> <span class="n">tmp_overallPlantCost</span>
        <span class="o">*</span> <span class="n">tmp_techs</span><span class="p">[</span><span
                class="n">tmpSngTechID</span><span class="p">]</span><span class="o">.</span><span class="n">interestRate</span><span
                class="p">)</span> <span class="o">*</span> \
        <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span
                class="n">tmp_policies</span><span class="p">[</span><span class="n">tmp_techs</span><span
                class="p">[</span><span class="n">tmpSngTechID</span><span class="p">]</span><span
                class="o">.</span><span class="n">policy</span><span class="p">]</span><span class="o">.</span><span
                class="n">taxCredit</span><span class="p">))</span>

        <span class="c1"># define and initialize the list containing the output variables</span>
        <span class="n">outList</span> <span class="o">=</span> <span class="p">[</span><span
                class="n">tmpCosts</span><span class="p">,</span><span class="n">tmpIncsAmount</span><span
                class="p">,</span><span class="n">tmp_EXTplantCost</span><span class="p">,</span><span class="n">tmp_INTplantCost</span><span
                class="p">,</span><span class="n">tmp_wacc</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">outList</span></div>

    <div class="viewcode-block" id="agents.rearrangeTechPropList"><a class="viewcode-back"
                                                                     href="../../../lib.classes.html#lib.classes.agents.agents.rearrangeTechPropList">[docs]</a>
        <span class="k">def</span> <span class="nf">rearrangeTechPropList</span><span class="p">(</span><span
                class="bp">self</span><span class="p">,</span><span class="n">tmpNewProp</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
        <span class="sd">			Function to rearrange the proportion of the different technology according to a possible new one</span>
        <span class="sd">			</span>
        <span class="sd">			:param tmpNewProp: New energy receipt proportion list		</span>
        <span class="sd">		&#39;&#39;&#39;</span>
        <span class="n">newList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">goon</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">tmpNewPropResidue</span> <span class="o">=</span> <span class="n">copy</span><span
                class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span
                class="n">tmpNewProp</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">sngTech</span> <span class="ow">in</span> <span
                class="bp">self</span><span class="o">.</span><span class="n">nrgPropReceipt</span><span
                class="p">:</span>
        <span class="n">tmpValue</span> <span class="o">=</span> <span class="n">sngTech</span> <span class="o">-</span>
        <span class="n">tmpNewPropResidue</span> <span class="c1"># Compute the different between the extant proportion and the new one</span>
        <span class="k">if</span> <span class="n">goon</span> <span class="o">==</span> <span class="mi">1</span><span
                class="p">:</span>
        <span class="k">if</span> <span class="n">tmpValue</span> <span class="o">&gt;=</span> <span class="mi">0</span><span
                class="p">:</span>
        <span class="n">newList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
                class="n">tmpValue</span><span class="p">)</span>
        <span class="n">goon</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">newList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
                class="mi">0</span><span class="p">)</span>
        <span class="n">tmpNewPropResidue</span> <span class="o">-=</span> <span class="n">sngTech</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="n">newList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
                class="n">sngTech</span><span class="p">)</span>

        <span class="n">newList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span
                class="n">tmpNewProp</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">newList</span></div>

    <div class="viewcode-block" id="agents.updateEnergyPropAccordingToEfficiencyDrop"><a class="viewcode-back"
                                                                                         href="../../../lib.classes.html#lib.classes.agents.agents.updateEnergyPropAccordingToEfficiencyDrop">[docs]</a>
        <span class="k">def</span> <span class="nf">updateEnergyPropAccordingToEfficiencyDrop</span><span
                class="p">(</span><span class="bp">self</span><span class="p">,</span> <span
                class="n">tmpAllTechs</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
        <span class="sd">			Update energy tech proportions list according to the efficiency prop parameter of the technologies</span>
        <span class="sd">			</span>
        <span class="sd">			:param tmpAllTechs: All technologies list</span>
        <span class="sd">		&#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">IDtech</span><span class="p">,</span> <span class="n">_</span> <span
                class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span
                class="bp">self</span><span class="o">.</span><span class="n">nrgPropReceipt</span><span
                class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">nrgTechAges</span><span class="p">[</span><span class="n">IDtech</span><span
                class="p">]</span> <span class="o">%</span> <span class="mi">12</span> <span class="o">==</span> <span
                class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span
                class="bp">self</span><span class="o">.</span><span class="n">nrgPropReceipt</span><span
                class="p">[</span><span class="n">IDtech</span><span class="p">]</span> <span class="o">&gt;</span>
        <span class="mi">0</span><span class="p">):</span>
        <span class="c1"># Compute new technology energy contribute</span>
        <span class="n">tmpNewTechProp</span> <span class="o">=</span> <span class="nb">round</span><span
                class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">nrgPropReceipt</span><span class="p">[</span><span class="n">IDtech</span><span
                class="p">]</span> <span class="o">*</span> <span class="n">tmpAllTechs</span><span
                class="p">[</span><span class="bp">self</span><span class="o">.</span><span
                class="n">nrgTechsReceipt</span><span class="p">[</span><span class="n">IDtech</span><span
                class="p">]]</span><span class="o">.</span><span class="n">efficiency</span><span class="p">)</span>
        <span class="c1"># Compute the difference with the old contribute</span>
        <span class="n">tmpDelta</span> <span class="o">=</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">nrgPropReceipt</span><span class="p">[</span><span
                class="n">IDtech</span><span class="p">]</span> <span class="o">-</span> <span
                class="n">tmpNewTechProp</span>
        <span class="c1"># Update energy prop list removing inefficiency and adding the energy drop to the traditional energy</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrgPropReceipt</span><span
                class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span
                class="n">tmpDelta</span>
        <span class="k">if</span> <span class="n">IDtech</span> <span class="o">!=</span> <span class="mi">0</span><span
                class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrgPropReceipt</span><span
                class="p">[</span><span class="n">IDtech</span><span class="p">]</span> <span class="o">-=</span> <span
                class="n">tmpDelta</span></div>

    <div class="viewcode-block" id="agents.computeLoanAnnualInterest"><a class="viewcode-back"
                                                                         href="../../../lib.classes.html#lib.classes.agents.agents.computeLoanAnnualInterest">[docs]</a>
        <span class="k">def</span> <span class="nf">computeLoanAnnualInterest</span><span class="p">(</span><span
                class="bp">self</span><span class="p">,</span> <span class="n">tmpCapital</span><span class="p">,</span>
        <span class="n">tmpYears</span><span class="p">,</span> <span class="n">tmpRate</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
        <span class="sd">			Compute investment annual interests</span>
        <span class="sd">			</span>
        <span class="sd">			:param tmpCapital: Overall amount of capitals</span>
        <span class="sd">			:param tmpYears: Years of the investment</span>
        <span class="sd">			:param tmpRate: Rate of the investment </span>
        <span class="sd">		&#39;&#39;&#39;</span>
        <span class="n">annualInt</span> <span class="o">=</span> <span class="p">(</span><span
                class="n">tmpCapital</span> <span class="o">*</span> <span class="n">tmpYears</span> <span
                class="o">*</span> <span class="n">tmpRate</span><span class="p">)</span> <span class="o">/</span> <span
                class="n">tmpYears</span>
        <span class="k">return</span> <span class="n">annualInt</span></div>

    <div class="viewcode-block" id="agents.performFinancialActivities"><a class="viewcode-back"
                                                                          href="../../../lib.classes.html#lib.classes.agents.agents.performFinancialActivities">[docs]</a>
        <span class="k">def</span> <span class="nf">performFinancialActivities</span><span class="p">(</span><span
                class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
        <span class="sd">			This procedure performs all the month financial activities, monthly debts payments</span>
        <span class="sd">		&#39;&#39;&#39;</span>

        <span class="k">for</span> <span class="n">cnt</span><span class="p">,</span> <span class="n">sngDept</span>
        <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span
                class="o">.</span><span class="n">RemainingDebts</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sngDept</span> <span class="o">&gt;</span> <span
                class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RemainingDebts</span><span
                class="p">[</span><span class="n">cnt</span><span class="p">]</span> <span class="o">-=</span> <span
                class="bp">self</span><span class="o">.</span><span class="n">debtMonthRepayment</span><span
                class="p">[</span><span class="n">cnt</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">RemainingDebts</span><span class="p">[</span><span class="n">cnt</span><span
                class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RemainingDebts</span><span
                class="p">[</span><span class="n">cnt</span><span class="p">]</span> <span class="o">=</span> <span
                class="mi">0</span>
        <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">RemainingDebts</span><span
                class="p">[</span><span class="n">cnt</span><span class="p">]</span> <span class="o">=</span> <span
                class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debtMonthRepayment</span><span
                class="p">[</span><span class="n">cnt</span><span class="p">]</span> <span class="o">=</span> <span
                class="mi">0</span>
        <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="nb">sum</span><span class="p">(</span><span class="bp">self</span><span
                class="o">.</span><span class="n">RemainingDebts</span><span class="p">)</span> <span
                class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flagFree</span> <span class="o">=</span>
        <span class="bp">True</span></div>

    <div class="viewcode-block" id="agents.computeMonthNrgCostsAndPoll"><a class="viewcode-back"
                                                                           href="../../../lib.classes.html#lib.classes.agents.agents.computeMonthNrgCostsAndPoll">[docs]</a>
        <span class="k">def</span> <span class="nf">computeMonthNrgCostsAndPoll</span><span class="p">(</span><span
                class="bp">self</span><span class="p">,</span> <span class="n">tmpTechs</span><span class="p">,</span>
        <span class="n">tmpTime</span><span class="p">,</span> <span class="n">tmpPolicies</span><span
                class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
        <span class="sd">			Function to assess the monthly energy costs according to the monthly energy needs</span>
        <span class="sd">		</span>
        <span class="sd">			:param tmpTechs: List of all the technologies</span>
        <span class="sd">			:param tmpTime: Current month</span>
        <span class="sd">			:param tmpPolicies: list of the present policies	</span>
        <span class="sd">		&#39;&#39;&#39;</span>
        <span class="n">tempMonthCosts</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">tempPoll</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#counter = 0</span>
        <span class="k">for</span> <span class="n">idtech</span><span class="p">,</span> <span class="n">tech</span>
        <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span
                class="o">.</span><span class="n">nrgTechsReceipt</span><span class="p">):</span>

        <span class="c1"># .. compute costs and revenues</span>
        <span class="n">tmpDistanceFromSourceMultiplier</span> <span class="o">=</span> <span class="nb">pow</span><span
                class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="nb">abs</span><span
                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span
                class="o">-</span> <span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">tech</span><span class="p">]</span><span class="o">.</span><span class="n">X</span><span
                class="p">),</span><span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span
                class="nb">pow</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span
                class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">tech</span><span
                class="p">]</span><span class="o">.</span><span class="n">Y</span><span class="p">),</span><span
                class="mi">2</span><span class="p">),</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="n">tmpDistanceFromSourceMultiplier</span> <span class="o">*=</span> <span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">tech</span><span class="p">]</span><span class="o">.</span><span
                class="n">transportCosts</span>

        <span class="n">tempMonthCosts</span> <span class="o">+=</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">nrgPropReceipt</span><span class="p">[</span><span
                class="n">idtech</span><span class="p">]</span>\
        <span class="o">*</span> <span class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">tech</span><span class="p">]</span><span class="o">.</span><span class="n">cost</span>\
        <span class="o">+</span> <span class="n">tmpDistanceFromSourceMultiplier</span>\
        <span class="o">+</span> <span class="n">tmpPolicies</span><span class="p">[</span><span
                class="bp">self</span><span class="o">.</span><span class="n">techPolicy</span><span
                class="p">[</span><span class="n">idtech</span><span class="p">][</span><span class="mi">0</span><span
                class="p">]]</span><span class="o">.</span><span class="n">carbonTax</span>\
        <span class="o">-</span> <span class="n">tmpPolicies</span><span class="p">[</span><span
                class="bp">self</span><span class="o">.</span><span class="n">techPolicy</span><span
                class="p">[</span><span class="n">idtech</span><span class="p">][</span><span class="mi">0</span><span
                class="p">]]</span><span class="o">.</span><span class="n">feedIN</span><span class="p">)</span>\
        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">debtMonthRepayment</span><span class="p">[</span><span class="n">idtech</span><span class="p">]</span>

        <span class="c1"># IF BIOENERGY the profit of the entire plant must be computed</span>
        <span class="n">tempTechAge</span> <span class="o">=</span> <span class="nb">round</span><span
                class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nrgTechAges</span><span
                class="p">[</span><span class="n">idtech</span><span class="p">]</span> <span class="o">/</span> <span
                class="mi">12</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">tech</span><span class="p">]</span><span class="o">.</span><span class="n">solarBased</span>
        <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span
                class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">tech</span><span class="p">]</span><span class="o">.</span><span
                class="n">fromTons2kWhmese</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">tempMonthCosts</span> <span class="o">+=</span> <span class="p">((</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">tech</span><span class="p">]</span><span class="o">.</span><span
                class="n">plantDimension</span> <span class="o">*</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">bioHoursXMonth</span> <span class="o">*</span> <span
                class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">tech</span><span class="p">]</span><span class="o">.</span><span
                class="n">efficiency</span><span class="o">**</span><span class="n">tempTechAge</span><span
                class="p">))</span> <span class="o">-</span> \
        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">nrgPropReceipt</span><span class="p">[</span><span class="n">idtech</span><span
                class="p">]</span> <span class="o">*</span> <span class="p">(</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">tech</span><span class="p">]</span><span class="o">.</span><span
                class="n">efficiency</span><span class="o">**</span><span class="n">tempTechAge</span><span class="p">)))</span>
        <span class="o">*</span> \
        <span class="p">(</span><span class="n">tmpPolicies</span><span class="p">[</span><span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">tech</span><span
                class="p">]</span><span class="o">.</span><span class="n">policy</span><span class="p">]</span><span
                class="o">.</span><span class="n">carbonTax</span> <span class="o">+</span> <span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">tech</span><span
                class="p">]</span><span class="o">.</span><span class="n">cost</span> <span class="o">-</span> \
        <span class="n">tmpPolicies</span><span class="p">[</span><span class="n">tmpTechs</span><span
                class="p">[</span><span class="n">tech</span><span class="p">]</span><span class="o">.</span><span
                class="n">policy</span><span class="p">]</span><span class="o">.</span><span
                class="n">feedIN</span><span class="p">)</span>

        <span class="c1"># If the technology is bio-energy, so I must pay suppliers and have money from clients</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span
                class="o">.</span><span class="n">suppliers</span><span class="p">)</span> <span class="o">&gt;</span>
        <span class="mi">0</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">sup</span> <span class="ow">in</span> <span
                class="bp">self</span><span class="o">.</span><span class="n">suppliers</span><span class="p">:</span>
        <span class="n">tempMonthCosts</span> <span class="o">+=</span> <span class="n">sup</span><span
                class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span
                class="o">.</span><span class="n">client</span><span class="p">)</span> <span class="o">&gt;</span>
        <span class="mi">0</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">cli</span> <span class="ow">in</span> <span
                class="bp">self</span><span class="o">.</span><span class="n">client</span><span class="p">:</span>
        <span class="n">tempMonthCosts</span> <span class="o">-=</span> <span class="n">cli</span><span
                class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># If the incentive is still valid the tax credit on the investment is computed	</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">tmpPolicies</span><span
                class="p">[</span><span class="bp">self</span><span class="o">.</span><span
                class="n">techPolicy</span><span class="p">[</span><span class="n">idtech</span><span
                class="p">][</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span
                class="n">taxCreditInv</span> <span class="o">&gt;</span> <span class="mi">0</span><span
                class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span
                class="bp">self</span><span class="o">.</span><span class="n">techPolicy</span><span
                class="p">[</span><span class="n">idtech</span><span class="p">][</span><span class="mi">1</span><span
                class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
        <span class="k">if</span><span class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">tech</span><span class="p">]</span><span class="o">.</span><span class="n">solarBased</span>
        <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">tempMonthCosts</span> <span class="o">-=</span> <span class="p">(</span><span
                class="bp">self</span><span class="o">.</span><span class="n">nrgPropReceipt</span><span
                class="p">[</span><span class="n">idtech</span><span class="p">]</span> <span class="o">/</span> <span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">tech</span><span
                class="p">]</span><span class="o">.</span><span class="n">fromKWH2KW</span> <span class="o">*</span>
        <span class="n">tmpTechs</span><span class="p">[</span><span class="n">tech</span><span class="p">]</span><span
                class="o">.</span><span class="n">plantCost</span><span class="p">)</span> \
        <span class="o">*</span> <span class="n">tmpPolicies</span><span class="p">[</span><span
                class="bp">self</span><span class="o">.</span><span class="n">techPolicy</span><span
                class="p">[</span><span class="n">idtech</span><span class="p">][</span><span class="mi">0</span><span
                class="p">]]</span><span class="o">.</span><span class="n">taxCreditInv</span> <span class="o">/</span>
        <span class="n">tmpPolicies</span><span class="p">[</span><span class="bp">self</span><span
                class="o">.</span><span class="n">techPolicy</span><span class="p">[</span><span class="n">idtech</span><span
                class="p">][</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span
                class="n">length</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">tech</span><span class="p">]</span><span class="o">.</span><span class="n">solarBased</span>
        <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;</span> <span
                class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">tech</span><span class="p">]</span><span class="o">.</span><span
                class="n">fromTons2kWhmese</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">):</span>
        <span class="n">tempMonthCosts</span> <span class="o">-=</span> <span class="p">(</span><span
                class="n">tmpTechs</span><span class="p">[</span><span class="n">tech</span><span
                class="p">]</span><span class="o">.</span><span class="n">plantDimension</span> <span class="o">*</span>
        <span class="n">tmpTechs</span><span class="p">[</span><span class="n">tech</span><span class="p">]</span><span
                class="o">.</span><span class="n">plantCost</span><span class="p">)</span> \
        <span class="o">*</span> <span class="n">tmpPolicies</span><span class="p">[</span><span
                class="bp">self</span><span class="o">.</span><span class="n">techPolicy</span><span
                class="p">[</span><span class="n">idtech</span><span class="p">][</span><span class="mi">0</span><span
                class="p">]]</span><span class="o">.</span><span class="n">taxCreditInv</span> <span class="o">/</span>
        <span class="n">tmpPolicies</span><span class="p">[</span><span class="bp">self</span><span
                class="o">.</span><span class="n">techPolicy</span><span class="p">[</span><span class="n">idtech</span><span
                class="p">][</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span
                class="n">length</span>


        <span class="c1"># If the technology has a negative price (e.g. solar or bio), then it means that the agent sells energy and it has to buy normal energy</span>
        <span class="k">if</span> <span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">tech</span><span class="p">]</span><span class="o">.</span><span class="n">cost</span> <span
                class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">tempMonthCosts</span> <span class="o">+=</span> <span class="n">tmpTechs</span><span
                class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span
                class="n">cost</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">nrgPropReceipt</span><span class="p">[</span><span class="n">idtech</span><span
                class="p">]</span>

        <span class="c1"># Check policy validity </span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">techPolicy</span><span class="p">[</span><span class="n">idtech</span><span
                class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span
                class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">techPolicy</span><span
                class="p">[</span><span class="n">idtech</span><span class="p">][</span><span class="mi">1</span><span
                class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">techPolicy</span><span class="p">[</span><span class="n">idtech</span><span
                class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span
                class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">techPolicy</span><span
                class="p">[</span><span class="n">idtech</span><span class="p">]</span> <span class="o">=</span> <span
                class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span
                class="p">]</span>

        <span class="c1"># Update technology age</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nrgTechAges</span><span
                class="p">[</span><span class="n">idtech</span><span class="p">]</span> <span class="o">+=</span> <span
                class="mi">1</span>

        <span class="c1">#raw_input(&quot;...&quot;)</span>

        <span class="c1"># .. update statistic variables</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">nrgPropReceipt</span><span class="p">[</span><span class="n">idtech</span><span
                class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">tmpTechs</span><span class="p">[</span><span class="n">tech</span><span class="p">]</span><span
                class="o">.</span><span class="n">incrementNRGdist</span><span class="p">((</span><span class="n">tmpTime</span>
        <span class="o">-</span> <span class="mi">1</span><span class="p">))</span>
        <span class="n">tmpTechs</span><span class="p">[</span><span class="n">tech</span><span class="p">]</span><span
                class="o">.</span><span class="n">incrementKWHdist</span><span class="p">((</span><span class="n">tmpTime</span>
        <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="bp">self</span><span
                class="o">.</span><span class="n">nrgPropReceipt</span><span class="p">[</span><span
                class="n">idtech</span><span class="p">])</span>

        <span class="c1"># .. compute pollution</span>
        <span class="n">tempPoll</span> <span class="o">=</span> <span class="n">tempPoll</span> <span
                class="o">+</span> <span class="p">(</span><span class="n">tmpTechs</span><span class="p">[</span><span
                class="n">tech</span><span class="p">]</span><span class="o">.</span><span class="n">co2</span> <span
                class="o">*</span> <span class="bp">self</span><span class="o">.</span><span
                class="n">nrgPropReceipt</span><span class="p">[</span><span class="n">idtech</span><span
                class="p">])</span>


        <span class="c1"># ... Update agent variables. </span>
        <span class="bp">self</span><span class="o">.</span><span class="n">month_balance</span> <span
                class="o">=</span> <span class="n">tempMonthCosts</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">=</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balance</span> <span class="o">+</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">month_balance</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">co2</span> <span class="o">=</span> <span
                class="n">tempPoll</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">+=</span> <span
                class="mi">1</span></div>

    <div class="viewcode-block" id="agents.defineTechAttraction"><a class="viewcode-back"
                                                                    href="../../../lib.classes.html#lib.classes.agents.agents.defineTechAttraction">[docs]</a>
        <span class="k">def</span> <span class="nf">defineTechAttraction</span><span class="p">(</span><span class="bp">self</span><span
                class="p">,</span> <span class="n">tmpTechs</span><span class="p">,</span> <span
                class="n">tmpAgents</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;Define technology attraction according to the neighborhood characteristics&#39;&#39;&#39;</span>

        <span class="n">tmpTotTech</span> <span class="o">=</span> <span class="p">[</span><span
                class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span
                class="p">(</span><span class="n">tmpTechs</span><span class="p">)</span>
        <span class="n">tmpRelTech</span> <span class="o">=</span> <span class="p">[</span><span
                class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span
                class="p">(</span><span class="n">tmpTechs</span><span class="p">)</span>
        <span class="n">tmpHaTech</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span
                class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span
                class="n">tmpTechs</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">sngT</span> <span class="ow">in</span> <span
                class="n">tmpTechs</span><span class="p">:</span> <span class="c1"># For each tech</span>
        <span class="k">for</span> <span class="n">sngA</span> <span class="ow">in</span> <span
                class="n">tmpAgents</span><span class="p">:</span> <span class="c1"># For each agent</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">ID</span> <span
                class="o">!=</span> <span class="n">sngA</span><span class="o">.</span><span class="n">ID</span><span
                class="p">:</span> <span class="c1"># if the agent is not itself</span>
        <span class="k">if</span> <span class="n">sngT</span><span class="o">.</span><span class="n">ID</span> <span
                class="ow">in</span> <span class="n">sngA</span><span class="o">.</span><span
                class="n">nrgTechsReceipt</span><span class="p">:</span> <span class="c1"># For each technology used by the agent</span>
        <span class="k">if</span> <span class="n">sngA</span><span class="o">.</span><span
                class="n">nrgPropReceipt</span><span class="p">[</span><span class="n">sngA</span><span
                class="o">.</span><span class="n">nrgTechsReceipt</span><span class="o">.</span><span
                class="n">index</span><span class="p">(</span><span class="n">sngT</span><span class="o">.</span><span
                class="n">ID</span><span class="p">)]</span> <span class="o">&gt;</span> <span class="mi">0</span><span
                class="p">:</span>
        <span class="c1"># Attractiveness is measured by the energy dimension and physical dimension of the agent over the square distance</span>
        <span class="n">tmpTotTech</span><span class="p">[</span><span class="n">sngT</span><span
                class="o">.</span><span class="n">ID</span><span class="p">]</span> <span class="o">+=</span> <span
                class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">sngA</span><span
                class="o">.</span><span class="n">totEnergyNeed</span><span class="p">)</span> <span class="o">/</span>
        <span class="nb">pow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">distanceList</span><span class="p">[</span><span class="n">sngA</span><span class="o">.</span><span
                class="n">ID</span><span class="p">],</span><span class="mi">2</span><span class="p">))</span>
        <span class="n">tmpHaTech</span><span class="p">[</span><span class="n">sngT</span><span class="o">.</span><span
                class="n">ID</span><span class="p">]</span> <span class="o">+=</span> <span class="p">(</span><span
                class="nb">float</span><span class="p">(</span><span class="n">sngA</span><span class="o">.</span><span
                class="n">ha</span><span class="p">)</span> <span class="o">/</span> <span class="nb">pow</span><span
                class="p">(</span><span class="bp">self</span><span class="o">.</span><span
                class="n">distanceList</span><span class="p">[</span><span class="n">sngA</span><span class="o">.</span><span
                class="n">ID</span><span class="p">],</span><span class="mi">2</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">cnt</span><span class="p">,</span> <span class="n">_</span> <span
                class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span
                class="n">tmpRelTech</span><span class="p">):</span>
        <span class="n">tmpRelTech</span><span class="p">[</span><span class="n">cnt</span><span class="p">]</span>
        <span class="o">=</span> <span class="p">(</span><span class="n">tmpTotTech</span><span class="p">[</span><span
                class="n">cnt</span><span class="p">]</span> <span class="o">+</span> <span
                class="n">tmpHaTech</span><span class="p">[</span><span class="n">cnt</span><span class="p">])</span>
        <span class="o">/</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span
                class="nb">sum</span><span class="p">(</span><span class="n">tmpTotTech</span><span class="p">))</span>
        <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="nb">sum</span><span
                class="p">(</span><span class="n">tmpHaTech</span><span class="p">)))</span>
        <span class="n">cnt</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">tmpRelTech</span></div>

    <span class="c1"># --------------------------------------------------------------|</span>
    <span class="c1"># DEFINE TECHNOLOGIES ATTRACTION</span>
    <span class="c1"># --------------------------------------------------------------|</span>

    <div class="viewcode-block" id="agents.genLogFun"><a class="viewcode-back"
                                                         href="../../../lib.classes.html#lib.classes.agents.agents.genLogFun">[docs]</a>
        <span class="k">def</span> <span class="nf">genLogFun</span><span class="p">(</span><span class="bp">self</span><span
                class="p">,</span> <span class="n">tmpX</span><span class="p">,</span> <span
                class="n">tmpExp</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span
                class="n">tmpM</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span
                class="n">tmpUpper</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span
                class="n">tmpLower</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span
                class="n">tmpGrowth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">tmpQ</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
        <span class="sd">			Function to return the general logistic value according to the different paramerts</span>
        <span class="sd">			Default values are those of the logistic function</span>
        <span class="sd">			1 - self.riskPredisposition move the curve on the axis</span>
        <span class="sd">			1 / ( pow(1 + (1 * pow(e,(-1*(x-(4*(0.5-0.01)))))),(1/0.5)) ) </span>
        <span class="sd">			</span>
        <span class="sd">			:param tmpX: maximum investment length - payback period</span>
        <span class="sd">			:param tmpExp: agent health</span>
        <span class="sd">			:param tmpGrowth: curve slope</span>
        <span class="sd">		&#39;&#39;&#39;</span>

        <span class="n">e</span> <span class="o">=</span> <span class="mf">2.71828182845904523536</span>
        <span class="n">tmpY</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">valToAdd</span> <span class="o">=</span> <span class="n">tmpM</span>
        <span class="n">M</span> <span class="o">=</span> <span class="p">((</span><span class="mi">1</span><span
                class="o">-</span><span class="n">tmpExp</span><span class="p">)</span> <span class="o">*</span> <span
                class="mi">10</span><span class="p">)</span> <span class="o">+</span> <span class="n">valToAdd</span>
        <span class="n">tmpQ</span> <span class="o">=</span> <span class="n">tmpExp</span>
        <span class="k">try</span><span class="p">:</span>
        <span class="n">tmpY</span> <span class="o">=</span> <span class="n">tmpLower</span> <span class="o">+</span>
        <span class="p">(</span> <span class="p">(</span><span class="n">tmpUpper</span> <span class="o">-</span> <span
                class="n">tmpLower</span><span class="p">)</span> <span class="o">/</span> \
        <span class="p">(</span> <span class="nb">pow</span><span class="p">(</span><span class="mi">1</span> <span
                class="o">+</span> <span class="p">(</span><span class="n">tmpQ</span> <span class="o">*</span> <span
                class="nb">pow</span><span class="p">(</span><span class="n">e</span><span class="p">,(</span><span
                class="o">-</span><span class="n">tmpGrowth</span><span class="o">*</span><span class="p">(</span><span
                class="n">tmpX</span><span class="o">-</span><span class="p">(</span><span class="n">M</span><span
                class="o">*</span><span class="p">((</span><span class="mi">1</span><span class="o">-</span><span
                class="n">tmpExp</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span
                class="o">.</span><span class="n">riskPredisposition</span><span class="p">)))))),(</span><span
                class="mi">1</span><span class="o">/</span><span class="n">tmpExp</span><span class="p">))</span> <span
                class="p">)</span> \
        <span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
        <span class="n">tmpY</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">tmpY</span></div>
</div>
	
	
</pre>
                        </div>

                    </div>
                </div>
                <footer>


                    <hr/>

                    <div role="contentinfo">
                        <p>
                            &copy; Copyright 2014, Alessandro.

                        </p>
                    </div>
                    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a
                        href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a
                        href="https://readthedocs.org">Read the Docs</a>.

                </footer>

            </div>
        </div>

    </section>

</div>


<script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
        URL_ROOT: '../../../',
        VERSION: '20141022',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE: true
    };
</script>
<script type="text/javascript" src="../../../_static/jquery.js"></script>
<script type="text/javascript" src="../../../_static/underscore.js"></script>
<script type="text/javascript" src="../../../_static/doctools.js"></script>
<script type="text/javascript"
        src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<script type="text/javascript" src="../../../_static/js/theme.js"></script>


<script type="text/javascript">
    jQuery(function () {
        SphinxRtdTheme.StickyNav.enable();
    });
</script>


</body>
</html>